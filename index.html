<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/blogs/images/girl_180_0.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blogs/images/girl_32_0.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blogs/images/girl_16_0.png">
  <link rel="mask-icon" href="/blogs/images/logo.svg" color="#222">

<link rel="stylesheet" href="/blogs/css/main.css">


<link rel="stylesheet" href="/blogs/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"tyson-wu.github.io","root":"/blogs/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="If you want, Just do it!">
<meta property="og:type" content="website">
<meta property="og:title" content="TysonWu&#39;s Blog">
<meta property="og:url" content="https://tyson-wu.github.io/blogs/index.html">
<meta property="og:site_name" content="TysonWu&#39;s Blog">
<meta property="og:description" content="If you want, Just do it!">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Tyson Wu">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://tyson-wu.github.io/blogs/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>TysonWu's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blogs/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">TysonWu's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">AiCooXiao</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/blogs/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blogs/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/blogs/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/blogs/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/blogs/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tyson-wu.github.io/blogs/2222/08/30/Music/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blogs/images/avatar.png">
      <meta itemprop="name" content="Tyson Wu">
      <meta itemprop="description" content="If you want, Just do it!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TysonWu's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blogs/2222/08/30/Music/" class="post-title-link" itemprop="url">我爱听的歌</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2222-08-30 18:03:00" itemprop="dateCreated datePublished" datetime="2222-08-30T18:03:00+08:00">2222-08-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-11-27 20:16:33" itemprop="dateModified" datetime="2022-11-27T20:16:33+08:00">2022-11-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Music/" itemprop="url" rel="index"><span itemprop="name">Music</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>撕夜<br>用心爱你你不懂<br>十年<br>时间都去哪儿了<br>其实你不懂我的心<br>关于你们之间的故事<br>假如爱有天意</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tyson-wu.github.io/blogs/2022/11/27/Unity_Ex_Editor_CreateParentForTransforms/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blogs/images/avatar.png">
      <meta itemprop="name" content="Tyson Wu">
      <meta itemprop="description" content="If you want, Just do it!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TysonWu's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blogs/2022/11/27/Unity_Ex_Editor_CreateParentForTransforms/" class="post-title-link" itemprop="url">Create Parent For Transforms</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-11-27 10:01:00 / 修改时间：20:16:33" itemprop="dateCreated datePublished" datetime="2022-11-27T10:01:00+08:00">2022-11-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Unity/" itemprop="url" rel="index"><span itemprop="name">Unity</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Unity/Extention/" itemprop="url" rel="index"><span itemprop="name">Extention</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Unity/Extention/Editor/" itemprop="url" rel="index"><span itemprop="name">Editor</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Unity/Extention/Editor/MenuUtility/" itemprop="url" rel="index"><span itemprop="name">MenuUtility</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="扩展命令"><a href="#扩展命令" class="headerlink" title="扩展命令"></a>扩展命令</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> UnityEditor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">CreateParentForTransforms</span> : <span class="title">ScriptableObject</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//[MenuItem(&quot;MenuUtility/Create Parent For Selection _p&quot;)]</span></span><br><span class="line">    [<span class="meta">MenuItem(<span class="meta-string">&quot;MenuUtility/Create Parent For Selection&quot;</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">MenuInsertParent</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        Transform[] selection = Selection.GetTransforms(</span><br><span class="line">            SelectionMode.TopLevel | SelectionMode.Editable);</span><br><span class="line">        GameObject newParent = ObjectFactory.CreateGameObject(<span class="string">&quot;Parent&quot;</span>);</span><br><span class="line">        Undo.RegisterCreatedObjectUndo(newParent, <span class="string">&quot;Create Parent For Selection&quot;</span>);</span><br><span class="line">        <span class="keyword">foreach</span> (Transform t <span class="keyword">in</span> selection)</span><br><span class="line">        &#123;</span><br><span class="line">            Undo.SetTransformParent(t, newParent.transform, <span class="string">&quot;Create Parent For Selection 1&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Disable the menu if there is nothing selected</span></span><br><span class="line">    <span class="comment">//[MenuItem(&quot;MenuUtility/Create Parent For Selection _p&quot;, true)]</span></span><br><span class="line">    [<span class="meta">MenuItem(<span class="meta-string">&quot;MenuUtility/Create Parent For Selection&quot;</span>, true)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="built_in">bool</span> <span class="title">ValidateSelection</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> Selection.activeTransform != <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tyson-wu.github.io/blogs/2022/11/27/Unity_Ex_Editor_PackageMenuItem/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blogs/images/avatar.png">
      <meta itemprop="name" content="Tyson Wu">
      <meta itemprop="description" content="If you want, Just do it!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TysonWu's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blogs/2022/11/27/Unity_Ex_Editor_PackageMenuItem/" class="post-title-link" itemprop="url">Unity Package Menu Item</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-11-27 10:01:00 / 修改时间：20:16:33" itemprop="dateCreated datePublished" datetime="2022-11-27T10:01:00+08:00">2022-11-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Unity/" itemprop="url" rel="index"><span itemprop="name">Unity</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Unity/Extention/" itemprop="url" rel="index"><span itemprop="name">Extention</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Unity/Extention/Editor/" itemprop="url" rel="index"><span itemprop="name">Editor</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Unity/Extention/Editor/AssetsMenuUtility/" itemprop="url" rel="index"><span itemprop="name">AssetsMenuUtility</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Package扩展命令"><a href="#Package扩展命令" class="headerlink" title="Package扩展命令"></a>Package扩展命令</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEditor;</span><br><span class="line"><span class="keyword">using</span> UnityEditor.PackageManager.Requests;</span><br><span class="line"><span class="keyword">using</span> UnityEditor.PackageManager;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> System.Text.RegularExpressions;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Unity.Editor.Extention</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">PackageMenuItem</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">static</span> String targetPackage;</span><br><span class="line">        <span class="keyword">static</span> EmbedRequest Request;</span><br><span class="line">        <span class="keyword">static</span> ListRequest LRequest;</span><br><span class="line"></span><br><span class="line">        [<span class="meta">MenuItem(<span class="meta-string">&quot;Assets/Package/Embed Installed Package&quot;</span>)</span>]</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">EmbedInstalledPackage</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">if</span>(Selection.assetGUIDs.Length &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">string</span> path = AssetDatabase.GUIDToAssetPath(Selection.assetGUIDs[<span class="number">0</span>]);</span><br><span class="line">                Match match = Regex.Match(path, <span class="string">&quot;^Packages/([^/]+)$&quot;</span>);</span><br><span class="line">                <span class="keyword">if</span>(match.Success)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">string</span> targetPackage = match.Groups[<span class="number">1</span>].Value;</span><br><span class="line">                    <span class="comment">//Debug.LogError(targetPackage);</span></span><br><span class="line">                    Embed(targetPackage);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        [<span class="meta">MenuItem(<span class="meta-string">&quot;Assets/Package/Embed Installed Package&quot;</span>, validate = true)</span>]</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="built_in">bool</span> <span class="title">Check_EmbedInstalledPackage</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">if</span> (Selection.assetGUIDs.Length &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">string</span> path = AssetDatabase.GUIDToAssetPath(Selection.assetGUIDs[<span class="number">0</span>]);</span><br><span class="line">                Match match = Regex.Match(path, <span class="string">&quot;^Packages/([^/]+)$&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> match.Success;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Embed</span>(<span class="params"><span class="built_in">string</span> inTarget</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="comment">// Embed a package in the project</span></span><br><span class="line">            Debug.Log(<span class="string">&quot;Embed(&#x27;&quot;</span> + inTarget + <span class="string">&quot;&#x27;) called&quot;</span>);</span><br><span class="line">            Request = Client.Embed(inTarget);</span><br><span class="line">            EditorApplication.update += Progress;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Progress</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">if</span> (Request.IsCompleted)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (Request.Status == StatusCode.Success)</span><br><span class="line">                    Debug.Log(<span class="string">&quot;Embedded: &quot;</span> + Request.Result.packageId);</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (Request.Status &gt;= StatusCode.Failure)</span><br><span class="line">                    Debug.Log(Request.Error.message);</span><br><span class="line"></span><br><span class="line">                EditorApplication.update -= Progress;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">region</span> Test</span></span><br><span class="line">        [<span class="meta">MenuItem(<span class="meta-string">&quot;Assets/Package/Test/Get Package Name&quot;</span>, priority = 100)</span>]</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">GetPackageName</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="comment">// First get the name of an installed package</span></span><br><span class="line">            LRequest = Client.List();</span><br><span class="line">            EditorApplication.update += LProgress;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">LProgress</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">if</span> (LRequest.IsCompleted)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (LRequest.Status == StatusCode.Success)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">foreach</span> (<span class="keyword">var</span> package <span class="keyword">in</span> LRequest.Result)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="comment">// Only retrieve packages that are currently installed in the</span></span><br><span class="line">                        <span class="comment">// project (and are neither Built-In nor already Embedded)</span></span><br><span class="line">                        <span class="keyword">if</span> (package.isDirectDependency &amp;&amp; package.source</span><br><span class="line">                            != PackageSource.BuiltIn &amp;&amp; package.source</span><br><span class="line">                            != PackageSource.Embedded)</span><br><span class="line">                        &#123;</span><br><span class="line">                            targetPackage = package.name;</span><br><span class="line">                            Debug.LogError(targetPackage);</span><br><span class="line">                            <span class="comment">//break;</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    Debug.Log(LRequest.Error.message);</span><br><span class="line"></span><br><span class="line">                EditorApplication.update -= LProgress;</span><br><span class="line"></span><br><span class="line">                <span class="comment">//Embed(targetPackage);</span></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">#<span class="meta-keyword">endregion</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tyson-wu.github.io/blogs/2022/11/10/Unity_Asset_Extractor/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blogs/images/avatar.png">
      <meta itemprop="name" content="Tyson Wu">
      <meta itemprop="description" content="If you want, Just do it!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TysonWu's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blogs/2022/11/10/Unity_Asset_Extractor/" class="post-title-link" itemprop="url">Unity资源逆向解析</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-11-10 10:01:00" itemprop="dateCreated datePublished" datetime="2022-11-10T10:01:00+08:00">2022-11-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-11-27 20:16:33" itemprop="dateModified" datetime="2022-11-27T20:16:33+08:00">2022-11-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Unity/" itemprop="url" rel="index"><span itemprop="name">Unity</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Asset-Ripper"><a href="#Asset-Ripper" class="headerlink" title="Asset Ripper"></a>Asset Ripper</h2><p>支持将打包后的资源解包，而且试过成功解包出图片、材质、动画、Shader等等。效果非常好。<br><a target="_blank" rel="noopener" href="https://assetripper.github.io/AssetRipper/articles/Downloads.html">下载链接</a></p>
<h2 id="UABE-AssetsBundleExtractor"><a href="#UABE-AssetsBundleExtractor" class="headerlink" title="UABE(AssetsBundleExtractor)"></a>UABE(AssetsBundleExtractor)</h2><p>支持解析打包后的资源，但是好像只能罗列出资源信息，不能像<code>Asset Ripper</code>一样完美的将资源解包出来。但是支持修改打包后的资源，这是其他工具所不具备的。<br><a target="_blank" rel="noopener" href="https://github.com/SeriousCache/UABE/releases/tag/2.2stablec">下载链接</a><br><a target="_blank" rel="noopener" href="https://community.7daystodie.com/topic/1871-uabe-asset-bundle-extractor/page/35/">社区</a></p>
<h2 id="AssetStudio"><a href="#AssetStudio" class="headerlink" title="AssetStudio"></a>AssetStudio</h2><p>和<code>Asset Ripper</code>一样，支持将打包后的资源解包，但是试过只能解出部分资源。<br><a target="_blank" rel="noopener" href="https://github.com/Perfare/AssetStudio/releases">下载链接</a></p>
<h2 id="关于Unity-Resources"><a href="#关于Unity-Resources" class="headerlink" title="关于Unity Resources"></a>关于Unity Resources</h2><p>Unity项目运行时可以通过Resources和AssetsBundle方式读取资源。推荐是使用AssetsBundle，但是Resource资源的组织方式影响着包体的大小，所以即便项目中没有使用到Resources资源读取方式，也还是需要有所了解。</p>
<ul>
<li>首先Resources资源读取方式，需要将资源放置在Assets目录及其子目录下的Resources目录。只有在这个文件夹下的资源才可以使用Resources的方式读取。</li>
<li>打包项目工程时，Resources下的资源会直接打到项目App，如Apk。</li>
<li>Resources资源在App中，是存储在<code>resources.assets</code>、<code>resources.assets.resS</code>、<code>sharedassets0.assets</code>、<code>sharedassets0.assets.resS</code>文件中。</li>
<li>关于<code>*.assets</code>和<code>*.assets.resS</code>两个后缀文件，同名文件中的*.assets存储的是序列化文件。而<code>*.assets.resS</code>里面存储的是二进制数据源，如图片、音效等。</li>
<li><code>*.assets</code>文件类似于<code>Prefab</code>，存储着资源的所有序列化信息，以及对二进制数据源的引用，比如说图片，而<code>*.assets.resS</code>里面便是<code>*.assets</code>里面所引用的实际的图片、音效等数据。</li>
<li>Resources目录下的资源是打包到<code>resources*</code>中还是打包到<code>sharedassets*</code>文件中，是有一定的规律。未被引用的资源是打包到<code>resources*</code>中，比如新放入的图片还没有使用。而被引用的资源是被打包到<code>sharedassets*</code>，比如被其他Prefab引用的图片。</li>
</ul>
<p>除了我们自己创建的Resources资源，Unity在打包时还会拷贝一些默认资源，比如内置的着色器，按钮图集等等。这些资源是被统一打包到<code>unity default resources</code>文件中(实际操作是将这个文件直接拷贝到包内，这个资源文件是平台预先就打包好的)。<code>unity default resources</code>资源实际上是<code>*.assets</code>和<code>*.assets.resS</code>文件的合体，也就是包含序列化数据和二进制源数据。整个文件有好几兆，但是实际项目中我们可能不会使用这些内置资源，所以无疑会导致包体变大，资源空间浪费。而且在苹果IOS查重时，这个文件还可能被标记。所以可以适当的修改这个文件。</p>
<p>以上这些Resources资源文件，都是可以使用上面的解包工具打开，可以查看到这些文件中具体包含了哪些资源。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://fileinfo.com/extension/ress">https://fileinfo.com/extension/ress</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/SeriousCache/UABE/issues/32">https://github.com/SeriousCache/UABE/issues/32</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tyson-wu.github.io/blogs/2022/09/21/Unity-Editor-Recompile/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blogs/images/avatar.png">
      <meta itemprop="name" content="Tyson Wu">
      <meta itemprop="description" content="If you want, Just do it!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TysonWu's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blogs/2022/09/21/Unity-Editor-Recompile/" class="post-title-link" itemprop="url">Compiler Options</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-09-21 10:01:00" itemprop="dateCreated datePublished" datetime="2022-09-21T10:01:00+08:00">2022-09-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-11-27 20:16:33" itemprop="dateModified" datetime="2022-11-27T20:16:33+08:00">2022-11-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Unity/" itemprop="url" rel="index"><span itemprop="name">Unity</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Unity/Editor/" itemprop="url" rel="index"><span itemprop="name">Editor</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><p>在用Unity开发项目时，每次编写或者修改C#脚本，Unity都会自动检查脚本，并进行自动编译。频繁的自动编译，无疑是会降低开发效率，基于这个出发点，我希望能够关闭自动编译功能。在Unity下有两个设置是和自动编译相关的，就是Preferences界面下的General里面的<code>Auto Refresh</code>和<code>Script Changes While Playing</code>。前者是自动刷新，每次刷新的时候就会检查脚本是否需要编译，这时候我们可以把自动刷新关掉，然后使用手动的方式进行刷新。后者主要是控制运行时脚本自动编译的时机，是否在运行时进行自动编译。<br><img src="/blogs/images/src/Snipaste_2022-09-21_21-45-55.png" alt="wwwwwww"><br>上图中的设置项的位置可能会因Unity的版本不同而有所改变，这里我用的Unity版本是<code>Unity 2020.3.33f1c2 Personal</code><br>这里写了一个编辑器脚本，将上面的设置暴露在菜单栏中。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEditor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ScriptOptions</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//Auto Refresh</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//kAutoRefresh has two posible values</span></span><br><span class="line">    <span class="comment">//0 = Auto Refresh Disabled</span></span><br><span class="line">    <span class="comment">//1 = Auto Refresh Enabled</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//This is called when you click on the &#x27;Tools/Auto Refresh&#x27; and toggles its value</span></span><br><span class="line">    [<span class="meta">MenuItem(<span class="meta-string">&quot;Tools/Auto Refresh&quot;</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">AutoRefreshToggle</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">var</span> status = EditorPrefs.GetInt(<span class="string">&quot;kAutoRefresh&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (status == <span class="number">1</span>)</span><br><span class="line">            EditorPrefs.SetInt(<span class="string">&quot;kAutoRefresh&quot;</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            EditorPrefs.SetInt(<span class="string">&quot;kAutoRefresh&quot;</span>, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//This is called before &#x27;Tools/Auto Refresh&#x27; is shown to check the current value</span></span><br><span class="line">    <span class="comment">//of kAutoRefresh and update the checkmark</span></span><br><span class="line">    [<span class="meta">MenuItem(<span class="meta-string">&quot;Tools/Auto Refresh&quot;</span>, true)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="built_in">bool</span> <span class="title">AutoRefreshToggleValidation</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">var</span> status = EditorPrefs.GetInt(<span class="string">&quot;kAutoRefresh&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (status == <span class="number">1</span>)</span><br><span class="line">            Menu.SetChecked(<span class="string">&quot;Tools/Auto Refresh&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            Menu.SetChecked(<span class="string">&quot;Tools/Auto Refresh&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//Script Compilation During Play</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//ScriptCompilationDuringPlay has three posible values</span></span><br><span class="line">    <span class="comment">//0 = Recompile And Continue Playing</span></span><br><span class="line">    <span class="comment">//1 = Recompile After Finished Playing</span></span><br><span class="line">    <span class="comment">//2 = Stop Playing And Recompile</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//The following methods assing the three possible values to ScriptCompilationDuringPlay</span></span><br><span class="line">    <span class="comment">//depending on the option you selected</span></span><br><span class="line">    [<span class="meta">MenuItem(<span class="meta-string">&quot;Tools/Script Compilation During Play/Recompile And Continue Playing&quot;</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ScriptCompilationToggleOption0</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        EditorPrefs.SetInt(<span class="string">&quot;ScriptCompilationDuringPlay&quot;</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    [<span class="meta">MenuItem(<span class="meta-string">&quot;Tools/Script Compilation During Play/Recompile After Finished Playing&quot;</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ScriptCompilationToggleOption1</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        EditorPrefs.SetInt(<span class="string">&quot;ScriptCompilationDuringPlay&quot;</span>, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    [<span class="meta">MenuItem(<span class="meta-string">&quot;Tools/Script Compilation During Play/Stop Playing And Recompile&quot;</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ScriptCompilationToggleOption2</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        EditorPrefs.SetInt(<span class="string">&quot;ScriptCompilationDuringPlay&quot;</span>, <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//This is called before &#x27;Tools/Script Compilation During Play/Recompile And Continue Playing&#x27;</span></span><br><span class="line">    <span class="comment">//is shown to check for the current value of ScriptCompilationDuringPlay and update the checkmark</span></span><br><span class="line">    [<span class="meta">MenuItem(<span class="meta-string">&quot;Tools/Script Compilation During Play/Recompile And Continue Playing&quot;</span>, true)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="built_in">bool</span> <span class="title">ScriptCompilationValidation</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="comment">//Here, we uncheck all options before we show them</span></span><br><span class="line">        Menu.SetChecked(<span class="string">&quot;Tools/Script Compilation During Play/Recompile And Continue Playing&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">        Menu.SetChecked(<span class="string">&quot;Tools/Script Compilation During Play/Recompile After Finished Playing&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">        Menu.SetChecked(<span class="string">&quot;Tools/Script Compilation During Play/Stop Playing And Recompile&quot;</span>, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> status = EditorPrefs.GetInt(<span class="string">&quot;ScriptCompilationDuringPlay&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//Here, we put the checkmark on the current value of ScriptCompilationDuringPlay</span></span><br><span class="line">        <span class="keyword">switch</span> (status)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                Menu.SetChecked(<span class="string">&quot;Tools/Script Compilation During Play/Recompile And Continue Playing&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                Menu.SetChecked(<span class="string">&quot;Tools/Script Compilation During Play/Recompile After Finished Playing&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                Menu.SetChecked(<span class="string">&quot;Tools/Script Compilation During Play/Stop Playing And Recompile&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>回到开头的问题，为了解决频繁自动编译的问题，这里我禁用用自动刷新的功能，但是这就导致了我每次都需要手动刷新，如果没有手动刷新，那么修改的代码就不会生效。<br>所以这里换个思路来解决问题，我们只在运行前和退出运行的时候，进行代码编译，而其他时候都不会进行代码编译。这样上面提到的设置都不用管，仍然可以启用自动刷新功能，但是自动刷新不会进行自动编译。刚好Unity提供是否启用自动编译的接口。所以在不需要任何设置的情况下，只需要将下面的编辑器脚本导入到Unity的Editor目录下，在运行前和运行结束的时候会自动检查代码进行自动编译。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEditor;</span><br><span class="line"></span><br><span class="line">[<span class="meta">InitializeOnLoad</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">CompilerOptionsEditorScript</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="title">CompilerOptionsEditorScript</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        EditorApplication.playModeStateChanged += PlaymodeChanged;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">PlaymodeChanged</span>(<span class="params">PlayModeStateChange state</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="comment">//在切换运行模式的时候自动进行脚本编译</span></span><br><span class="line">        <span class="keyword">if</span> (state == PlayModeStateChange.ExitingPlayMode</span><br><span class="line">            || state == PlayModeStateChange.ExitingEditMode)</span><br><span class="line">        &#123;</span><br><span class="line">            EditorApplication.UnlockReloadAssemblies();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//在运行时或编辑模型下，关闭脚本自动编译，解决频繁编译降低开发效率的问题</span></span><br><span class="line">        <span class="keyword">if</span> (state == PlayModeStateChange.EnteredPlayMode</span><br><span class="line">            || state == PlayModeStateChange.EnteredEditMode)</span><br><span class="line">        &#123;</span><br><span class="line">            EditorApplication.LockReloadAssemblies();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="https://support.unity.com/hc/en-us/articles/210452343-How-to-stop-automatic-assembly-compilation-from-script">How to stop automatic assembly compilation from script</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tyson-wu.github.io/blogs/2022/08/30/Docker_GitLab_Jenkins_Unity/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blogs/images/avatar.png">
      <meta itemprop="name" content="Tyson Wu">
      <meta itemprop="description" content="If you want, Just do it!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TysonWu's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blogs/2022/08/30/Docker_GitLab_Jenkins_Unity/" class="post-title-link" itemprop="url">GitLab and Jenkins and Unity</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-30 18:03:00" itemprop="dateCreated datePublished" datetime="2022-08-30T18:03:00+08:00">2022-08-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-11-27 20:16:33" itemprop="dateModified" datetime="2022-11-27T20:16:33+08:00">2022-11-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Docker/" itemprop="url" rel="index"><span itemprop="name">Docker</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在<a href="https://tyson-wu.github.io/blogs/2022/08/29/Docker_GitLab_Jenkins/">这篇文章</a>讲了如何在Docker上安装GitLab，Jenkins，并且最终Jenkins从GitLab上拉取到项目文件。<br>我最终的目的是希望能够对Unity项目进行打包部署，所以我开始关联Jenkins和Unity。因为我的Unity是装在物理机上，而Jenkins是装在Docker上，所以Jenkins没办法调取Unity进行打包操作。<br>所以我后面采用的是GitLab部署在Docker上，而Jenkins和Unity都是安装在物理机上，这样Jenkins通过GitLab的Url拉取项目，然后通过Unity Puglin插件调用Unity进行打包，当然也可以使用windows的批处理命令<code>build.bat</code>的方式。采用Unity Plugin的方式的一个好处就是unity的log会直接显示到Jenkins的log界面上。</p>
<p>其中，虽然Jenkins和GitLab的安装位置不一样，但是他们之间的关联操作和之前的是一样的。这里我们讲一下Jenkins和Unity的关联步骤。<br>首先建一个Unity项目，然后在项目根目录下创建两个文件<code>build_image_url_link.bat</code>和<code>myqrcode.py</code>。<br><code>build_image_url_link.bat</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> BASE_PATH=D:\ServicesData\Publish\%1\%2</span><br><span class="line"><span class="built_in">set</span> BASE_URL=http://192.168.31.186:8080/Publish/%1/%2</span><br><span class="line">python myqrcode.py %BASE_URL%/%3_%4.apk %BASE_PATH%\qrcode.png</span><br><span class="line"><span class="built_in">echo</span> DESC_INFO:%BASE_URL%/qrcode.png,%BASE_URL%/%3_%4.apk</span><br></pre></td></tr></table></figure>
<p><code>myqrcode.py</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> qrcode</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">data = sys.argv[<span class="number">1</span>]</span><br><span class="line">path=sys.argv[<span class="number">2</span>]</span><br><span class="line">img = qrcode.make(data)</span><br><span class="line">img.save(path)</span><br></pre></td></tr></table></figure>
<p><img src="/blogs/images/src/Snipaste_2022-09-01_01-13-45.png" alt="wwwwwww"><br>然后在Editor下创建<code>BuildTools.cs</code>脚本。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> UnityEditor;</span><br><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BuildTools</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">BuildTargetName</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">string</span> android = <span class="string">&quot;Android&quot;</span>;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">string</span> window = <span class="string">&quot;Window&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">EnvironmentParam</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">string</span> projectName = <span class="string">&quot;--projectName&quot;</span>;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">string</span> productName = <span class="string">&quot;--productName&quot;</span>;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">string</span> version = <span class="string">&quot;--version&quot;</span>;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">string</span> target = <span class="string">&quot;--target&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">bool</span> <span class="title">GetEnvironmentParam</span>(<span class="params"><span class="built_in">string</span> paramName, <span class="keyword">out</span> <span class="built_in">string</span> paramValue</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        paramValue = <span class="literal">null</span>;</span><br><span class="line">        <span class="built_in">string</span>[] args = System.Environment.GetCommandLineArgs();</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">var</span> s <span class="keyword">in</span> args)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (s.Contains(paramName))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (s.Split(<span class="string">&#x27;:&#x27;</span>).Length &gt; <span class="number">1</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    paramValue = s.Split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">1</span>];</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">MenuItem(<span class="meta-string">&quot;Build/Build APK&quot;</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">BuildApk</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (!GetEnvironmentParam(EnvironmentParam.productName, <span class="keyword">out</span> <span class="built_in">string</span> productName))</span><br><span class="line">            &#123;</span><br><span class="line">                productName = <span class="string">&quot;productName&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!GetEnvironmentParam(EnvironmentParam.version, <span class="keyword">out</span> <span class="built_in">string</span> bundleVersion))</span><br><span class="line">            &#123;</span><br><span class="line">                bundleVersion = <span class="string">&quot;bundleVersion&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!GetEnvironmentParam(EnvironmentParam.projectName, <span class="keyword">out</span> <span class="built_in">string</span> projectName))</span><br><span class="line">            &#123;</span><br><span class="line">                projectName = <span class="string">&quot;projectName&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!GetEnvironmentParam(EnvironmentParam.target, <span class="keyword">out</span> <span class="built_in">string</span> target))</span><br><span class="line">            &#123;</span><br><span class="line">                target = BuildTargetName.android;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">string</span> extention = <span class="string">&quot;.exe&quot;</span>;</span><br><span class="line">            PlayerSettings.productName = productName;</span><br><span class="line">            PlayerSettings.bundleVersion = bundleVersion;</span><br><span class="line">            BuildPlayerOptions opt = <span class="keyword">new</span> BuildPlayerOptions();</span><br><span class="line">            opt.scenes = <span class="keyword">new</span> <span class="built_in">string</span>[] &#123; <span class="string">&quot;Assets/Scenes/SampleScene.unity&quot;</span> &#125;;</span><br><span class="line">            <span class="keyword">switch</span> (target)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">case</span> BuildTargetName.android:</span><br><span class="line">                    opt.target = BuildTarget.Android;</span><br><span class="line">                    extention = <span class="string">&quot;.apk&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> BuildTargetName.window:</span><br><span class="line">                    opt.target = BuildTarget.StandaloneWindows64;</span><br><span class="line">                    extention = <span class="string">&quot;.exe&quot;</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            opt.locationPathName = <span class="string">$&quot;D:/ServicesData/Publish/<span class="subst">&#123;projectName&#125;</span>/<span class="subst">&#123;target&#125;</span>/<span class="subst">&#123;productName&#125;</span>_<span class="subst">&#123;bundleVersion&#125;</span><span class="subst">&#123;extention&#125;</span>&quot;</span>;</span><br><span class="line"></span><br><span class="line">            opt.options = BuildOptions.None;</span><br><span class="line">            BuildPipeline.BuildPlayer(opt);</span><br><span class="line">            Debug.Log(<span class="string">&quot;Build Done!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        catch(Exception e)</span><br><span class="line">        &#123;</span><br><span class="line">            Debug.LogError(e.Message);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="/blogs/images/src/Snipaste_2022-09-01_01-19-26.png" alt="wwwwwww"><br>到这一步Unity项目就建好了，然后将它提交的GitLab上。</p>
<p>创建一个打包项目，关联到GitLab，操作步骤参考上面的链接。进入当前打包项目的配置界面。按下图配置。<br><img src="/blogs/images/src/Snipaste_2022-09-01_00-58-51.png" alt="wwwwwww"><br><img src="/blogs/images/src/Snipaste_2022-09-01_00-59-04.png" alt="wwwwwww"><br><img src="/blogs/images/src/Snipaste_2022-09-01_01-01-05.png" alt="wwwwwww"><br><img src="/blogs/images/src/Snipaste_2022-09-01_01-01-13.png" alt="wwwwwww"><br><img src="/blogs/images/src/Snipaste_2022-09-01_01-01-23.png" alt="wwwwwww"><br><img src="/blogs/images/src/Snipaste_2022-09-01_01-02-11.png" alt="wwwwwww"><br><img src="/blogs/images/src/Snipaste_2022-09-01_01-02-32.png" alt="wwwwwww"><br><code>-quit -batchmode -nographics -executeMethod BuildTools.BuildApk --productName:$productName --version:$version --projectName:JenkinsUnityForAndroid --target:$target</code><br><img src="/blogs/images/src/Snipaste_2022-09-01_01-14-37.png" alt="wwwwwww"><br><code>build_image_url_link.bat JenkinsUnityForAndroid %target% %productName% %version%</code><br><img src="/blogs/images/src/Snipaste_2022-09-01_01-02-57.png" alt="wwwwwww"><br><code>DESC_INFO:(.*),(.*)</code><br><code>&lt;img src=&quot;\1&quot; height=&quot;200&quot; width=&quot;200&quot;  /&gt; &lt;a href=&quot;\2&quot;&gt;点击下载&lt;/a&gt;</code></p>
<p>这样就基本配置好Jenkins和Unity项目了。但是上面配置中多了很多奇怪的操作，像什么Python脚本之类的。这是因为我想将打包好的包发布到一个本地服务，然后通过二维码下载。<br>所以这里我需要搭建一个本地服务，看网上有说用蒲公英什么的来当作发布平台，但是我就想本地局域网用，所以使用我比较熟悉的<code>HFS</code>来冲动服务。<br><img src="/blogs/images/src/Snipaste_2022-09-01_01-39-11.png" alt="wwwwwww"><br>前面打包代码里面会将好的包放到这个服务路径下面，然后可以通过Url来访问，假设当前打好的包在这个路径下，那么手机输入对应的Url就可以下载了。不过每次都要输入Url很麻烦。所以这里考虑使用二维码。<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/rainboy2010/p/12007248.html">这里</a>讲了使用<code>qrcode</code>和<code>Image</code>两个python插件来生成二维码，所以首先我们要安装Python，这里<a target="_blank" rel="noopener" href="https://www.python.org/downloads/release/python-377/">Python 3.7.7</a>下载，安装默认安装，并勾选写入环境变量。<br>然后打开命令行窗口，分别输入<code>pip install qrcode</code>和<code>pip install Image</code>两个命令，安装好两个插件。<br>然后回到Jenkins，设置Jenkins内部的环境变量。<br><img src="/blogs/images/src/Snipaste_2022-09-01_01-31-34.png" alt="wwwwwww"><br><img src="/blogs/images/src/Snipaste_2022-09-01_01-31-47.png" alt="wwwwwww"><br>这里因为我的python是安装在<code>C:\Users\10524\AppData\Local\Programs\Python\Python37</code>目录下的。都准备好后，就可以开始构建了，下面是最终效果。<br><img src="/blogs/images/src/Snipaste_2022-09-01_01-50-28.png" alt="wwwwwww"></p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weboof/article/details/104491998">docker+gitlab+jenkins从零搭建自动化部署</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/rainboy2010/p/12007248.html">Jenkins生成APK链接的二维码</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_42281648/article/details/120057980">Jenkins构建Python项目提示：‘python‘ 不是内部或外部命令，也不是可运行的程序</a><br><a target="_blank" rel="noopener" href="https://www.python.org/downloads/release/python-377/">Python 3.7.7</a>下载Windows x86-64 executable installer，安装默认安装，并勾选写入环境变量。<br><a target="_blank" rel="noopener" href="http://www.rejetto.com/hfs/">HFS</a>下载，搭建简易服务。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tyson-wu.github.io/blogs/2022/08/29/Unity_Accelerator/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blogs/images/avatar.png">
      <meta itemprop="name" content="Tyson Wu">
      <meta itemprop="description" content="If you want, Just do it!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TysonWu's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blogs/2022/08/29/Unity_Accelerator/" class="post-title-link" itemprop="url">Easy-To-Use Accelerator Installation In Docker</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-29 20:03:00" itemprop="dateCreated datePublished" datetime="2022-08-29T20:03:00+08:00">2022-08-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-11-27 20:16:33" itemprop="dateModified" datetime="2022-11-27T20:16:33+08:00">2022-11-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Unity/" itemprop="url" rel="index"><span itemprop="name">Unity</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>拉取<a target="_blank" rel="noopener" href="https://github.com/CanBaycay/UnityAcceleratorDocker">这个工程</a>，如下所示：<br><img src="/blogs/images/src/Snipaste_2022-09-01_00-45-31.png" alt="wwwwwww"></p>
<p>然后双击<code>Install.bat</code>执行，可以在Docker界面上发现加速器的容器。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="https://github.com/CanBaycay/UnityAcceleratorDocker">Unity Accelerator Docker Configuration</a><br><a target="_blank" rel="noopener" href="https://forum.unity.com/threads/easy-to-use-accelerator-installation-in-docker.992063/">Easy-To-Use Accelerator Installation In Docker</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tyson-wu.github.io/blogs/2022/08/29/Docker_GitLab_Jenkins/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blogs/images/avatar.png">
      <meta itemprop="name" content="Tyson Wu">
      <meta itemprop="description" content="If you want, Just do it!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TysonWu's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blogs/2022/08/29/Docker_GitLab_Jenkins/" class="post-title-link" itemprop="url">GitLab and Jenkins</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-29 18:03:00" itemprop="dateCreated datePublished" datetime="2022-08-29T18:03:00+08:00">2022-08-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-11-27 20:16:33" itemprop="dateModified" datetime="2022-11-27T20:16:33+08:00">2022-11-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Docker/" itemprop="url" rel="index"><span itemprop="name">Docker</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>这里是介绍如何将GitLab和Jenkins关联到一起。其实主要是安装一些插件、再设置一些关键配置。<br>首先我们需要安装GitLab，还有Gitlab API、GitLab Authentication、Generic Webhook Trigger,其中GitLab是必须装的，后面几个我也装了，是不是必须的我也不知道。反正油多不坏菜。<br>装完之后，回到<code>Configure System</code>里面，应该可以看到<code>Gitlab</code>部分，设置好我们的GitLab服务的URL，如下图所示。<br><img src="/blogs/images/src/Snipaste_2022-08-29_23-18-17.png" alt="wwwwwww"><br>其中我GitLab的Url如下：<br><img src="/blogs/images/src/Snipaste_2022-08-29_23-18-45.png" alt="wwwwwww"></p>
<p>然后新建一个Jenkins项目，取名字、选第一个模式、确定。然后进入项目设置界面，这里我们会发现多了一个<code>GitLab Connection</code>，它下面有gitlab选项，这个就是前面在<code>Configure System</code>里面新建的。然后在<code>源码管理</code>的<code>Git</code>里面，设置仓库路径，以及凭证。<br><img src="/blogs/images/src/Snipaste_2022-08-29_23-43-02.png" alt="wwwwwww"></p>
<p>注意下面还有<code>指定分支（为空时代表any）</code>，里面默认是<code>master</code>分支，你确认一下有没有这个分支，或者这个分支是否是你想部署的。以及下方的源码库浏览器也可以设置一下。<br><img src="/blogs/images/src/Snipaste_2022-08-29_23-47-34.png" alt="wwwwwww"></p>
<p>还有就是，如果我们当前的Git项目有依赖其他Git项目，也就是<code>git sub modules</code>，那么我们要确保在构建前，所有的依赖项目都被拉取下来，所以需要额外的设置，如下：<br><img src="/blogs/images/src/Snipaste_2022-09-04_14-01-33.png" alt="wwwwwww"></p>
<p>设置好后，保存，点击<code>立即构建</code>进行部署。因为我们这里没有设置具体的部署规则，所以目前的操作只是会从GitLab里面拉取相应的项目到Jenkins工作目录下，如果构建成功，说明拉取成功，也就是GitLab和Jenkins关联成功，从而完成了最基本的设置。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weboof/article/details/104491998">docker+gitlab+jenkins从零搭建自动化部署</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tyson-wu.github.io/blogs/2022/08/29/Docker_GitLab_Install/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blogs/images/avatar.png">
      <meta itemprop="name" content="Tyson Wu">
      <meta itemprop="description" content="If you want, Just do it!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TysonWu's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blogs/2022/08/29/Docker_GitLab_Install/" class="post-title-link" itemprop="url">GitLab Install</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-29 17:03:00" itemprop="dateCreated datePublished" datetime="2022-08-29T17:03:00+08:00">2022-08-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-11-27 20:16:33" itemprop="dateModified" datetime="2022-11-27T20:16:33+08:00">2022-11-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Docker/" itemprop="url" rel="index"><span itemprop="name">Docker</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在Win10上安装完Docker后，就可以在Docker上安装GitLab了。<br>参考<a target="_blank" rel="noopener" href="https://www.cnblogs.com/taylorshi/p/13585821.html">TaylorShi</a>和<a target="_blank" rel="noopener" href="https://www.pudn.com/news/627b28dbebb030486da7d323.html">windows下使用docker安装gitlab</a>两篇教程，以后买这篇为主。单独根据其中某一篇我都没有安装成功。</p>
<p>这里记录一下最终采用的步骤：</p>
<ul>
<li>首先打开命令行窗口，然后输入<code>docker pull gitlab/gitlab-ce:latest</code>回车，会开始拉取GitLab镜像，拉去后我们可以在Docker的Image里面找到。</li>
<li>然后执行<code>docker run -d --publish 9980:80 --publish 9443:443 --publish 9922:22 --name gitlab --restart always --volume D:/ServicesData/GitLab/config:/etc/gitlab --volume D:/ServicesData/GitLab/logs:/var/log/gitlab --volume D:/ServicesData/GitLab/data:/var/opt/gitlab gitlab/gitlab-ce</code>这行命令。会在Docker里面创建容器，这里有一个<code>-d</code>的参数可以加也可以不加，但是不加的话，创建后的容器就是跟这个控制台窗口绑定了，关闭控制台窗口也就等于关闭GitLab容器。这里我是加了，表示容器在后台运行。之后就可以在Docker的容器目录里面找到。另外就是<code>--volume *:/var/*</code>，冒号前面的表示实际的路径，冒号后面的表示虚拟的映射路径，这我将他们映射到D盘下。</li>
<li>然后点击<a target="_blank" rel="noopener" href="http://127.0.0.1:9980/">http://127.0.0.1:9980/</a>跳转到我们搭建的GitLab的登录界面了(第一次可能会跳转失败，要多等一下，多试几次)。但是我们不知道账号密码，我们可以再次进入命令行窗口，输入 <code>docker exec -it gitlab bash</code>，进入linux的bash命令行，然后在输入<code>gitlab-rails console -e production</code>，然后是<code>user=User.where(id:1).first</code>查看账号是多少，然后<code>user.password = 123456789</code>，以及<code>user.password_confirmation = 123456789</code>修改密码，这里<code>123456789</code>是新密码，你也可以设置为其他。再使用<code>user.save!</code>命令保存设置，然后输入<code>exit</code>退出。刚刚修改密码的操作好像是Linux环境下的命令（ps:我不知道，我猜的），除了在这里修改，还可以在Docker界面上，里面每个容器右侧都有对应的terminal，可以直接输入。<br>下面是修改密码的命令行输入输出：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">(c) Microsoft Corporation。保留所有权利。</span><br><span class="line">C:\Users\10524&gt;docker ps</span><br><span class="line">              PORTS                                                               NAMES</span><br><span class="line">f70589c630be   gitlab/gitlab-ce   <span class="string">&quot;/assets/wrapper&quot;</span>        23 minutes ago   Up 23 minutes (healthy)   0.0.0.0:9922-&gt;22/tcp, 0.0.0.0:9980-&gt;80/tcp, 0.0.0.0:9443-&gt;443/tcp   gitlab</span><br><span class="line">9af9c4c71518   jenkins/jenkins    <span class="string">&quot;/usr/bin/tini -- /u…&quot;</span>   5 hours ago      Up 5 hours                50000/tcp, 0.0.0.0:8000-&gt;8080/tcp                                   jenkins</span><br><span class="line"></span><br><span class="line">C:\Users\10524&gt;docker <span class="built_in">exec</span> -it gitlab bash</span><br><span class="line">root@f70589c630be:/<span class="comment"># gitlab-rails console -e production</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line"> Ruby:         ruby 2.7.5p203 (2021-11-24 revision f69aeb8314) [x86_64-linux]</span><br><span class="line"> GitLab:       15.3.1 (16f34bd10fc) FOSS</span><br><span class="line"> GitLab Shell: 14.10.0</span><br><span class="line"> PostgreSQL:   13.6</span><br><span class="line">------------------------------------------------------------[ booted <span class="keyword">in</span> 26.85s ]</span><br><span class="line">Loading production environment (Rails 6.1.6.1)</span><br><span class="line">irb(main):001:0&gt;</span><br><span class="line">irb(main):002:0&gt;</span><br><span class="line">irb(main):003:0&gt; user=User.where(id:1).first</span><br><span class="line">=&gt; <span class="comment">#&lt;User id:1 @root&gt;</span></span><br><span class="line">irb(main):004:0&gt; user.password = 123456789</span><br><span class="line">=&gt; 123456789</span><br><span class="line">irb(main):005:0&gt; user.password_confirmation = 123456789</span><br><span class="line">=&gt; 123456789</span><br><span class="line">irb(main):006:0&gt; user.save</span><br><span class="line">=&gt; <span class="literal">true</span></span><br><span class="line">irb(main):007:0&gt; user.save!</span><br><span class="line">=&gt; <span class="literal">true</span></span><br><span class="line">irb(main):008:0&gt;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<blockquote>
<p>补充，我发现<a target="_blank" rel="noopener" href="https://blog.csdn.net/BThinker/article/details/124097795">Docker 搭建 Gitlab 服务器 (完整详细版)</a>教程好像更完整。其中修改IP那一步，我一直没有搞成功，后面突然有一次成功了，那一次我是用本机IP。之前没成功的，都是随便选的IP。甚至我还选了<code>127.0.0.1</code>，因为本地打开网页就是显示这个IP，修改后，网页正常打开等操作都正常，甚至本地拉去也正常。但是当使用Jenkins去关联GitLab路径时始终，都连接失败，后面IP改成本机实际的IP才成功。如下图：<br><img src="/blogs/images/src/Snipaste_2022-08-29_23-18-45.png" alt="wwwwwww"><br>gitlab.rb</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">external_url <span class="string">&#x27;http://192.**.***&#x27;</span></span><br><span class="line">gitlab_rails[<span class="string">&#x27;gitlab_ssh_host&#x27;</span>] = <span class="string">&#x27;192.168.**.***&#x27;</span></span><br><span class="line">gitlab_rails[<span class="string">&#x27;gitlab_shell_ssh_port&#x27;</span>] = 9922</span><br><span class="line"></span><br><span class="line"><span class="comment">## GitLab configuration settings</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>gitlab.yml</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## GitLab settings</span></span><br><span class="line">gitlab:</span><br><span class="line">  <span class="comment">## Web server settings (note: host is the FQDN, do not include http://)</span></span><br><span class="line">  host: 192.168.<span class="string">&#x27;**.***&#x27;</span></span><br><span class="line">  port: 9980</span><br><span class="line">  https: <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h2 id="重启后port自动改了"><a href="#重启后port自动改了" class="headerlink" title="重启后port自动改了"></a>重启后port自动改了</h2><p>当我第二天重启打开电脑，启动我的Gitlab时，我发现进不去了，因为<code>gitlab.yml</code>中的端口号又自动变回80。为了让原本已经配置好的Gitlab正常运行，需要重新修改端口号为9980。<br>但是直接修改<code>gitlab.yml</code>并不行。需要在gitlab运行的时候，然后按照下面的步骤：</p>
<ul>
<li>打开命令行窗口</li>
<li>输入<code>docker exec -it gitlab /bin/bash</code>，并运行，进入docker命令下。</li>
<li>输入<code>vi /etc/gitlab/gitlab.rb</code>，在vi里面修改<code>gitlab.rb</code>Ip，参考上面的代码。或者直接在本地找到<code>gitlab.rb</code>，使用本地文本编辑器修改。</li>
<li>输入<code>gitlab-ctl reconfigure</code>，这个命令会自动修改<code>gitlab.yml</code>的ip，但是端口号仍然是80。</li>
<li>输入<code>vi /opt/gitlab/embedded/service/gitlab-rails/config/gitlab.yml</code>,在vi里面修改<code>gitlab.yml</code>端口，参考上面的代码。或者直接在本地找到<code>gitlab.yml</code>，使用本地文本编辑器修改。</li>
<li>输入<code>gitlab-ctl restart</code>,这个命令会让最终修改的端口生效。</li>
<li>最后输入<code>exit</code>，退出docker命令。</li>
</ul>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/117253829581">Vim命令合集</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tyson-wu.github.io/blogs/2022/08/29/Docker_Jenkins_Install/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blogs/images/avatar.png">
      <meta itemprop="name" content="Tyson Wu">
      <meta itemprop="description" content="If you want, Just do it!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TysonWu's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blogs/2022/08/29/Docker_Jenkins_Install/" class="post-title-link" itemprop="url">Jenkins Install</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-29 16:02:00" itemprop="dateCreated datePublished" datetime="2022-08-29T16:02:00+08:00">2022-08-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-11-27 20:16:33" itemprop="dateModified" datetime="2022-11-27T20:16:33+08:00">2022-11-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Docker/" itemprop="url" rel="index"><span itemprop="name">Docker</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在Win10上安装完Docker后，就可以在Docker上安装Jenkins了。<br>参考官网教程<a target="_blank" rel="noopener" href="https://www.jenkins.io/zh/doc/book/installing/">在Windows上</a>。</p>
<ul>
<li><p>打开命令提示符窗口。</p>
</li>
<li><p>下载 jenkinsci/blueocean 镜像并使用以下 docker run 命令将其作为Docker中的容器运行 ：</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker run ^</span><br><span class="line">  -u root ^</span><br><span class="line">  --rm ^</span><br><span class="line">  -d ^</span><br><span class="line">  -p 8080:8080 ^</span><br><span class="line">  -p 50000:50000 ^</span><br><span class="line">  -v jenkins-data:/var/jenkins_home ^</span><br><span class="line">  -v /var/run/docker.sock:/var/run/docker.sock ^</span><br><span class="line">  jenkinsci/blueocean</span><br></pre></td></tr></table></figure>

<p>上面这段命令是官网上的案例，但是我并没有使用上面的，而是做了修改。后面的 <code>^</code>只是表示一行命令多行显示。特别注意这里使用的是<code>jenkinsci/blueocean</code>这个是官方推荐的，也有其他版本的Jenkins，但是可能会出现插件安装失败的问题，我之前就看了别人使用其他版本的教程，导致一些奇奇怪怪的问题。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -u root -d --name jenkins --restart always -p 8000:8080 -p 50000:50000 -v D:/ServicesData/Jenkins/.jenkins:/var/jenkins_home -v /var/run/docker.sock:/var/run/docker.sock jenkinsci/blueocean</span><br></pre></td></tr></table></figure>
<p>这里我加了<code>--name jenkins</code>表示我给这个容器取名为jenkins。这样创建的容器的名字就不是随机得了。<br>另外我删了<code>--rm</code>，因为这个表示关闭容器后会自动清理掉容器，也就是说在Docker上找不到了，下次再想开这个容器，还得重新敲命令，所以我就去掉这个。如果我真的想删掉这个容器，也可以直接在Docker容器界面上操作。<br>最后一个就是我将<code>jenkins-data</code>改成了<code>D:/ServicesData/Jenkins/.jenkins</code>,首先我们来看这个<code>-v jenkins-data:/var/jenkins_home</code>命令是干嘛的，因为Docker就相当与与一个虚拟机，里面有自己的文件管理系统，这里<code>/var/jenkins_home</code>就表示当前jenkins容器的工作目录，但是虚拟的毕竟是虚拟的，所以它搞了一个体的概念，就是Volume，专门用来春出数据的，而<code>jenkins-data</code>就是其中创建的一个体，是Docker在物理机上构建的一个私有文件目录，我们没办法管理与访问。直接安装Docker是装在C盘的，所以这些体数据，应该也是在C盘（猜的）。为了能够接管这些容器的工作数据，我们可以将虚拟文件目录映射到实际的物理机上，这里我在D盘建立一个目录，也就是说，之后Jenkins容器运行时产生的数据都会放到这个D盘目录下。<br>通过这个例子，我有点明白了Docker的一个基本运作方式了，打开Docker客户端，出现五个大选项，其中有三个就是容器、镜像、体。另外两个我没有用过，所以也不知道能干啥，但是这三个之间的关系似曾相识：MVC框架，嗯好像又不像。这么说吧，这三者其实是一件事情拆分成三个部分，其中镜像是我们的全局数据中心，然后容器是我们的控制总线，体是控制过程中产生的数据。在需要时，Docker会为我们创建任意个控制总线，相当与是一个壳子，然后向全局数据中心请求生产资料，最终产生的产品堆到各自的仓库里面，也就是体。</p>
<p>继续按照<a target="_blank" rel="noopener" href="https://www.jenkins.io/zh/doc/book/installing/#setup-wizard">Post-installation setup wizard</a>安装。这里我们在浏览器上输入<code>http://localhost:8080/</code>，会看到Jenkins的解锁界面，这里需要一个密码，如果安装在物理机下的话，我们能够找到对应的文件，但是现在是装在容器里面，所以要在Docker客户端里面找，我们首先找到Jienkins的容器，然后点击该容器，进入Logs界面，这里就是Jenkins控制台日志输出中，复制自动生成的字母数字密码（在两组星号之间），然后拿到解锁界面解锁。之后的操作就和物理机上安装差不多了。</p>
<p>然后在浏览器里面输入<code>http://localhost:8000/</code>就可进入了。<br>还有一个需要注意的是，如果启动容器后，网页访问不了Jenkins，可能是端口被占用了，换个端口试试。或者如果你知道怎么排查端口占用的情况就更直接了。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/blogs/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/blogs/page/7/">7</a><a class="extend next" rel="next" href="/blogs/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Tyson Wu"
      src="/blogs/images/avatar.png">
  <p class="site-author-name" itemprop="name">Tyson Wu</p>
  <div class="site-description" itemprop="description">If you want, Just do it!</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blogs/archives/">
        
          <span class="site-state-item-count">62</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/blogs/categories/">
          
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/blogs/tags/">
          
        <span class="site-state-item-count">31</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Tyson-Wu" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Tyson-Wu" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/zhao-wu-zhu-43" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;zhao-wu-zhu-43" rel="noopener" target="_blank"><i class="知乎 fa-fw"></i>知乎</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.cnblogs.com/Hi-blog/" title="https:&#x2F;&#x2F;www.cnblogs.com&#x2F;Hi-blog&#x2F;" rel="noopener" target="_blank">starnight_cyber</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Tyson Wu</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/blogs/lib/anime.min.js"></script>
  <script src="/blogs/lib/velocity/velocity.min.js"></script>
  <script src="/blogs/lib/velocity/velocity.ui.min.js"></script>

<script src="/blogs/js/utils.js"></script>

<script src="/blogs/js/motion.js"></script>


<script src="/blogs/js/schemes/pisces.js"></script>


<script src="/blogs/js/next-boot.js"></script>




  















  

  

</body>
</html>
