<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/blogs/images/girl_180_0.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blogs/images/girl_32_0.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blogs/images/girl_16_0.png">
  <link rel="mask-icon" href="/blogs/images/logo.svg" color="#222">

<link rel="stylesheet" href="/blogs/css/main.css">


<link rel="stylesheet" href="/blogs/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"tyson-wu.github.io","root":"/blogs/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="If you want, Just do it!">
<meta property="og:type" content="website">
<meta property="og:title" content="TysonWu&#39;s Blog">
<meta property="og:url" content="https://tyson-wu.github.io/blogs/page/2/index.html">
<meta property="og:site_name" content="TysonWu&#39;s Blog">
<meta property="og:description" content="If you want, Just do it!">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Tyson Wu">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://tyson-wu.github.io/blogs/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>TysonWu's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blogs/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">TysonWu's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">AiCooXiao</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/blogs/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blogs/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/blogs/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/blogs/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/blogs/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tyson-wu.github.io/blogs/2022/08/29/Docker_Jenkins_Install/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blogs/images/avatar.png">
      <meta itemprop="name" content="Tyson Wu">
      <meta itemprop="description" content="If you want, Just do it!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TysonWu's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blogs/2022/08/29/Docker_Jenkins_Install/" class="post-title-link" itemprop="url">Jenkins Install</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-29 16:02:00" itemprop="dateCreated datePublished" datetime="2022-08-29T16:02:00+08:00">2022-08-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-12-09 19:49:14" itemprop="dateModified" datetime="2022-12-09T19:49:14+08:00">2022-12-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Docker/" itemprop="url" rel="index"><span itemprop="name">Docker</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在Win10上安装完Docker后，就可以在Docker上安装Jenkins了。<br>参考官网教程<a target="_blank" rel="noopener" href="https://www.jenkins.io/zh/doc/book/installing/">在Windows上</a>。</p>
<ul>
<li><p>打开命令提示符窗口。</p>
</li>
<li><p>下载 jenkinsci/blueocean 镜像并使用以下 docker run 命令将其作为Docker中的容器运行 ：</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker run ^</span><br><span class="line">  -u root ^</span><br><span class="line">  --rm ^</span><br><span class="line">  -d ^</span><br><span class="line">  -p 8080:8080 ^</span><br><span class="line">  -p 50000:50000 ^</span><br><span class="line">  -v jenkins-data:/var/jenkins_home ^</span><br><span class="line">  -v /var/run/docker.sock:/var/run/docker.sock ^</span><br><span class="line">  jenkinsci/blueocean</span><br></pre></td></tr></table></figure>

<p>上面这段命令是官网上的案例，但是我并没有使用上面的，而是做了修改。后面的 <code>^</code>只是表示一行命令多行显示。特别注意这里使用的是<code>jenkinsci/blueocean</code>这个是官方推荐的，也有其他版本的Jenkins，但是可能会出现插件安装失败的问题，我之前就看了别人使用其他版本的教程，导致一些奇奇怪怪的问题。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -u root -d --name jenkins --restart always -p 8000:8080 -p 50000:50000 -v D:/ServicesData/Jenkins/.jenkins:/var/jenkins_home -v /var/run/docker.sock:/var/run/docker.sock jenkinsci/blueocean</span><br></pre></td></tr></table></figure>
<p>这里我加了<code>--name jenkins</code>表示我给这个容器取名为jenkins。这样创建的容器的名字就不是随机得了。<br>另外我删了<code>--rm</code>，因为这个表示关闭容器后会自动清理掉容器，也就是说在Docker上找不到了，下次再想开这个容器，还得重新敲命令，所以我就去掉这个。如果我真的想删掉这个容器，也可以直接在Docker容器界面上操作。<br>最后一个就是我将<code>jenkins-data</code>改成了<code>D:/ServicesData/Jenkins/.jenkins</code>,首先我们来看这个<code>-v jenkins-data:/var/jenkins_home</code>命令是干嘛的，因为Docker就相当与与一个虚拟机，里面有自己的文件管理系统，这里<code>/var/jenkins_home</code>就表示当前jenkins容器的工作目录，但是虚拟的毕竟是虚拟的，所以它搞了一个体的概念，就是Volume，专门用来春出数据的，而<code>jenkins-data</code>就是其中创建的一个体，是Docker在物理机上构建的一个私有文件目录，我们没办法管理与访问。直接安装Docker是装在C盘的，所以这些体数据，应该也是在C盘（猜的）。为了能够接管这些容器的工作数据，我们可以将虚拟文件目录映射到实际的物理机上，这里我在D盘建立一个目录，也就是说，之后Jenkins容器运行时产生的数据都会放到这个D盘目录下。<br>通过这个例子，我有点明白了Docker的一个基本运作方式了，打开Docker客户端，出现五个大选项，其中有三个就是容器、镜像、体。另外两个我没有用过，所以也不知道能干啥，但是这三个之间的关系似曾相识：MVC框架，嗯好像又不像。这么说吧，这三者其实是一件事情拆分成三个部分，其中镜像是我们的全局数据中心，然后容器是我们的控制总线，体是控制过程中产生的数据。在需要时，Docker会为我们创建任意个控制总线，相当与是一个壳子，然后向全局数据中心请求生产资料，最终产生的产品堆到各自的仓库里面，也就是体。</p>
<p>继续按照<a target="_blank" rel="noopener" href="https://www.jenkins.io/zh/doc/book/installing/#setup-wizard">Post-installation setup wizard</a>安装。这里我们在浏览器上输入<code>http://localhost:8080/</code>，会看到Jenkins的解锁界面，这里需要一个密码，如果安装在物理机下的话，我们能够找到对应的文件，但是现在是装在容器里面，所以要在Docker客户端里面找，我们首先找到Jienkins的容器，然后点击该容器，进入Logs界面，这里就是Jenkins控制台日志输出中，复制自动生成的字母数字密码（在两组星号之间），然后拿到解锁界面解锁。之后的操作就和物理机上安装差不多了。</p>
<p>然后在浏览器里面输入<code>http://localhost:8000/</code>就可进入了。<br>还有一个需要注意的是，如果启动容器后，网页访问不了Jenkins，可能是端口被占用了，换个端口试试。或者如果你知道怎么排查端口占用的情况就更直接了。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tyson-wu.github.io/blogs/2022/08/29/Docker_Install/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blogs/images/avatar.png">
      <meta itemprop="name" content="Tyson Wu">
      <meta itemprop="description" content="If you want, Just do it!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TysonWu's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blogs/2022/08/29/Docker_Install/" class="post-title-link" itemprop="url">Docker Install</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-29 15:01:00" itemprop="dateCreated datePublished" datetime="2022-08-29T15:01:00+08:00">2022-08-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-12-09 19:49:14" itemprop="dateModified" datetime="2022-12-09T19:49:14+08:00">2022-12-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Docker/" itemprop="url" rel="index"><span itemprop="name">Docker</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li><a target="_blank" rel="noopener" href="https://docs.docker.com/desktop/install/windows-install/">Install Docker Desktop on Windows</a>官网，下载安装包安装。</li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/baidu_30506559/article/details/125838506">【Docker闪退】【解决方法】It looks like there is an error with Docker Desktop, restart it to fix it</a>安装完成后会闪退的话，看这里。</li>
<li><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/windows/wsl/install-manual#step-4---download-the-linux-kernel-update-package">步骤 4 - 下载 Linux 内核更新包</a>打开后会有提示，进入到这一步</li>
<li><a target="_blank" rel="noopener" href="https://apps.microsoft.com/store/detail/ubuntu-1804-on-windows/9N9TNGVNDL3Q?hl=zh-cn&gl=CN">Ubuntu 18.04 on Windows</a>然后跟着提示进入这一步</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tyson-wu.github.io/blogs/2022/08/27/Jenkins_Git_Unity/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blogs/images/avatar.png">
      <meta itemprop="name" content="Tyson Wu">
      <meta itemprop="description" content="If you want, Just do it!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TysonWu's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blogs/2022/08/27/Jenkins_Git_Unity/" class="post-title-link" itemprop="url">在Win10下面配置基于Bonobo Git Server和Jenkins的Unity项目部署</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-27 19:01:34" itemprop="dateCreated datePublished" datetime="2022-08-27T19:01:34+08:00">2022-08-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-12-09 19:49:14" itemprop="dateModified" datetime="2022-12-09T19:49:14+08:00">2022-12-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Jenkins/" itemprop="url" rel="index"><span itemprop="name">Jenkins</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="记录"><a href="#记录" class="headerlink" title="记录"></a>记录</h2><p>这里假设我们已经在Win10系统上安装安装好了Jenkins和Bonobo Git Server，并且有一个Unity工程JenkinsTest，同时安装了Unity，我这里是Unity 2020.3.33f1c2 (64-bit)，另外还装了Git，并且在Bonobo Git Server服务上搭建了JenkinsTest的版本仓库。</p>
<p>在这些都准备好之后，下面是需要操作的步骤：</p>
<ul>
<li>在Jenkins里面新建一个Item，也就是一个新的部署项目。随便给它取个名字，这里使用JenkinsTest，然后选FreeStyle Project,最后点确定。</li>
<li>之后会自动跳转到一个设置界面，这里有很多设置，但是本教程只需要关注Git这个选项的配置，我们需要加一个Git仓库配置，勾选Git，然后点击Add Repository，会出现Repository URL，这里填JenkinsTest项目在Bonobo Git Server中的URL，我这里是htt://localhost:8888/JenkinsTest.git。然后是Credentials，这里需要填一个Git拉去的访问权限的东西，有几种选择，因为Bonobo Git Server只提供账号密码的访问形式，所以这里我们在下面添加按钮，打开新建一个凭证，这个凭证是采用账号密码的形式，然后在对应框中输入账号和密码，点击确定，然后回到Credentials下，选择新建好的凭证。</li>
<li>到这里为止，如果我们保存配置，然后对Jenkins进行构建的话，Jenkins会自动将Jenkins项目拉取到它的工作区。除此之外不会做任何其他事情。</li>
<li>为了最终打包工程，我们需要在上面那个设置界面下的构建设置里面，选择构建的方式。在Windows中，可以使用Execute Windows batch command来构建，主要是通过调用一些bat类型的可执行文件，来间接调用Unity项目中的打包脚本。这总方法在网上有很多，比如<a target="_blank" rel="noopener" href="http://dingxiaowei.cn/2018/11/17/">这个</a>教程。</li>
<li>但是还有一种方式，是直接使用Unity Editor的方式来打包，这种方式需要在Jenkins中安装Unity3D Plugin插件。然后在Jenkins的Global Tool Configuration的配置里面，找到Unity3d部分，那个有个Unity安装的按钮，点开，然后将电脑上已有的Unity配置上去。举个例子，我这里的Unity的安装路径是C:\Program Files\Unity\Hub\Editor\2020.3.33f1c2，然后别名随便。</li>
<li>然后再会到JenkinsTest的配置界面，就会发现构建部分多了Invoke Unity3d Editor的选项，选它，然后Unity3d installation name这里会自动出现前面配置的Unity别名，意思是我们选择这个Unity版本来打包。</li>
<li>然后在Editor command line arguments里面配置打包命令，这个是在Unity手册里面是有介绍到。我这里填的打包命令是<code>-quit -batchmode - - executeMethod BuildTools.BuildApk</code>。其中BuildTools是JenkinsTest工程下的编辑器脚本，BuildApk是该脚本下的一个打包函数，执行具体的打包操作。</li>
<li>了解过Execute Windows batch command打包方式的人应该记得，打包命令里面一般会包含Unity的路径和需要打包的项目路径，但是这里并没有，这是因为前面已经配置了Unity的安装路径，而项目路径是Jenkins自动拉取的git目录，所以这两个目录Jenkins是知道的。我最开始配了这两个反而导致报错。</li>
<li>最后，点击构建，开始打包JenkinsTest项目。</li>
</ul>
<p>到这里整个流程就走完了，可以愉快的一键打包。但是打包的时候我发现打包前要构建Unity工程的Library文件夹，这个是Unity自动生成的，这个文件夹构建一次要花很长时间，所以需要部署资源缓存服务。我又开始找相应的教程，然后发现这个资源缓存服务不亚于Git服务的搭建，要装安多东西。<br>所以最终我还是决定方式Jenkins和Bonobo Git Server的组合。因为我都打算安装那么多服务了，就想直接使用Docker来作为容器，这样什么服务都可以搭，那就搭一个更牛逼的Git服务吧，比如说GitLab。<br>不过Jenkins和Bonobo Git Server的组合，整个安装过程都是非常简单的，适合初学者使用，或者需求没有那么复杂的个人使用。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1654086">Unity-Jenkins打包部署工具（一）</a><br><a target="_blank" rel="noopener" href="https://unoniceday.github.io/jenkins-autobuild-unity-local/">Jenkins!自動建置Unity專案-本地建置</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/C_yuxuan/article/details/119182706">Unity为Git项目部署Jenkins</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tyson-wu.github.io/blogs/2022/08/25/Jenkins_Git_Server/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blogs/images/avatar.png">
      <meta itemprop="name" content="Tyson Wu">
      <meta itemprop="description" content="If you want, Just do it!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TysonWu's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blogs/2022/08/25/Jenkins_Git_Server/" class="post-title-link" itemprop="url">Configure Git Hooks on Bonobo Git Server in Windows</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-25 19:01:34" itemprop="dateCreated datePublished" datetime="2022-08-25T19:01:34+08:00">2022-08-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-12-09 19:49:14" itemprop="dateModified" datetime="2022-12-09T19:49:14+08:00">2022-12-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Jenkins/" itemprop="url" rel="index"><span itemprop="name">Jenkins</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="记录"><a href="#记录" class="headerlink" title="记录"></a>记录</h2><p>因为最近想自己搭建个人自动部署服务，所以考虑采用Jenkins和Git结合的方式。其中Jenkins负责项目自动化部署，Git负责版本控制，两者相结合需要一个Git服务。目前我所了解到的Git服务有<a target="_blank" rel="noopener" href="https://github.com/">GitHub</a>、<a target="_blank" rel="noopener" href="https://about.gitlab.com/">GitLab</a>、<a target="_blank" rel="noopener" href="https://gitee.com/">Gitee</a>、<a target="_blank" rel="noopener" href="http://gitblit.github.io/gitblit/">gitblit</a>、<a target="_blank" rel="noopener" href="https://bonobogitserver.com/">Bonobo Git Server</a>。<br>这里前面几个是比较知名的Git服务了，前三者有在线运营的服务，我们可以直接注册，功能相对比较完善，用的人也多，但是免费版的存储、流量限制比较大。后面两者可能很少人知道，但是可以作为小团队Git服务进行部署私服，当然<a target="_blank" rel="noopener" href="https://about.gitlab.com/">GitLab</a>作为开源项目也可以部署私服，但是部署方式会比较繁琐，相比而言，最后这两种方式部署更为简单。<br>因为我是个人使用，同时经济限制，只有一台笔记本，Windows系统，所以我选择<a target="_blank" rel="noopener" href="https://bonobogitserver.com/">Bonobo Git Server</a>，第一次部署完成后，真的被她的简陋的功能给震惊了，一度怀疑被收了智商税，因为我发现除了上传、下载、commit、用户管理、仓库管理，就没了，我无法想象她是如何和Jenkins联动的。好在懒惰拯救了我，当我想放弃<a target="_blank" rel="noopener" href="https://bonobogitserver.com/">Bonobo Git Server</a>的时候，我再转头研究<a target="_blank" rel="noopener" href="http://gitblit.github.io/gitblit/">gitblit</a>，发现要下载一堆相关联的软件，所以我再一次抱着试一试的心态看有没有教程将如何将<a target="_blank" rel="noopener" href="https://bonobogitserver.com/">Bonobo Git Server</a>与Jenkins关联起来，还真被我找到了，最终结果你们应该也猜到了，确实实现了两者的完美结合（ps：毕竟不完美的完美才是最大的完美）。好了废话有点多，进入正题吧。</p>
<p>首先安装<a target="_blank" rel="noopener" href="https://bonobogitserver.com/">Bonobo Git Server</a>本地服务，可以看<a target="_blank" rel="noopener" href="https://blog.csdn.net/u013851294/article/details/117811760">这篇</a>文章，我找了很多篇教程，这篇无疑是最简单而且真实有效的。</p>
<p>当然我们也要提前安装号Jenkins，找到一篇真正意义上的保姆级教程，在这里谢谢这位无私的大佬。教程路径<a target="_blank" rel="noopener" href="https://blog.csdn.net/linxinfa/article/details/118816132">【游戏开发进阶】教你Unity通过Jenkins实现自动化打包，打包这种事情就交给策划了（保姆级教程 | 命令行打包 | 自动构建）</a></p>
<blockquote>
<p>这里提一嘴，Jenkins安装完成后，默认工作路径一般是在C盘，也就是所有的需要部署的文件副本都会放在这个工作路径下，很显然C盘不适合当作工作路径，所以需要更改其工作路径。更改方式其实也不难，主要是有很多老旧不适用的方式在网络上混淆视听，给我们错误的引导。这里简单说一下，我们需要找到Jenkins的安装目录，这里我是<code>D:\Program Files\Jenkins</code>，在安装目录下找到<code>jenkins.xml</code>文件，然后修改其中的工作路径配置。注意这里使用的<code>Jenkins</code>版本是<code>Jenkins 2.346.3</code>。按下面更改，改前要关闭Jenkins,改后再重启。对了，我是参考的这里<a target="_blank" rel="noopener" href="https://blog.csdn.net/devalone/article/details/119299044">Jenkins 修改主目录 JENKINS_HOME</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- &lt;env name=&quot;JENKINS_HOME&quot; value=&quot;%ProgramData%\Jenkins\.jenkins&quot;/&gt; --&gt;</span> <span class="comment">&lt;!-- 这行是默认设置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">env</span> <span class="attr">name</span>=<span class="string">&quot;JENKINS_HOME&quot;</span> <span class="attr">value</span>=<span class="string">&quot;D:\ServicesData\Jenkins\.jenkins&quot;</span>/&gt;</span> <span class="comment">&lt;!-- 这行是我更换的路径，路径你也可以自己选 --&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<p>重点来了，<a target="_blank" rel="noopener" href="https://www.cnblogs.com/wyzhhhh/p/15762137.html">这篇文章</a>不算很详细的介绍了如何配置的过程，但是相比于网络上稀缺的资料，蚊子再小也是肉。按照这篇文章大概能了解其中的基本步骤，但是其中还有有一些谬误，具体说就是<code>post-receive</code>这个文件，在该文章中写成了<code>post_receive</code>，导致我搞了半天也没成功。最后是在<a target="_blank" rel="noopener" href="https://blog.dangl.me/archive/configure-git-hooks-on-bonobo-git-server-in-windows/">这里</a>找到了解决方案。当然前面这篇中文教程也是有很大的参考意义的。前面说了<a target="_blank" rel="noopener" href="https://bonobogitserver.com/">Bonobo Git Server</a>非常简陋，没有钩子之类的工具(ps:我其实不太懂什么是钩子，我猜应该是网站之间相互订阅、通知之类的事件传输)。因此需要借助<a target="_blank" rel="noopener" href="https://curl.se/download.html">curl</a>来实现，搜了一下，<code>curl</code>应该是用来发送<code>http</code>这类网络协议的，所以可以实现两者通信。</p>
<p>目前为止，确实实现了Jenkins部署时，会自动拉取Git服务中的项目，但是教程里面提到的Git上传修改会自动触发Jenkins进行部署的方法，我还没有试验成功。在文章中提到的方式就是借用<code>curl</code>，然后还需要配置一个<code>post-receive</code>文件，在提交Git时，确实能看到控制台里面多打印了一些消息，但是Jenkins并没有触发自动部署。所以这个问题暂时先搁置，等我找到方法再补充。</p>
<p>这个博客有点简陋，没有评论交流的功能，所以有兴趣可以跳到知乎给我点个赞（哈哈哈，算了，知乎点赞好像也没什么用，等我有精力好好升级升级我这个破站）。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="https://blog.dangl.me/archive/configure-git-hooks-on-bonobo-git-server-in-windows/">Configure Git Hooks on Bonobo Git Server in Windows</a><br><a target="_blank" rel="noopener" href="https://curl.se/download.html">curl</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wyzhhhh/p/15762137.html">Jenkins+Bonobo.Git.Server自动部署.net core项目</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/u013851294/article/details/117811760">Windows环境搭建 Gitlab 服务器</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/linxinfa/article/details/118816132">【游戏开发进阶】教你Unity通过Jenkins实现自动化打包，打包这种事情就交给策划了（保姆级教程 | 命令行打包 | 自动构建）</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tyson-wu.github.io/blogs/2022/08/23/Jenkins_Email/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blogs/images/avatar.png">
      <meta itemprop="name" content="Tyson Wu">
      <meta itemprop="description" content="If you want, Just do it!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TysonWu's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blogs/2022/08/23/Jenkins_Email/" class="post-title-link" itemprop="url">Config Jenkins Email</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-23 19:01:34" itemprop="dateCreated datePublished" datetime="2022-08-23T19:01:34+08:00">2022-08-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-12-09 19:49:14" itemprop="dateModified" datetime="2022-12-09T19:49:14+08:00">2022-12-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Jenkins/" itemprop="url" rel="index"><span itemprop="name">Jenkins</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="记录"><a href="#记录" class="headerlink" title="记录"></a>记录</h2><p>自动化部署是项目开发中经常用到的，当部署完成后最好能够通知到相关人员部署情况，这里记录基于Jenkins的邮件通知配置。<br>这里假设已经安装部署好了Jenkins，并且创建了一个叫<code>hello world</code>的部署项目。<br><img src="/blogs/images/src/Snipaste_2022-08-24_00-31-11.png" alt="wwwwwww"><br>关于邮件通知配置，只需要配两个地方，一个是<code>Manage Jenkins-&gt;System Configuration-&gt;Configure System</code>,这个是总的配置。另一个是<code>hello world-&gt;配置</code>，这个主要是针对特定项目的邮件设置。<br>在<code>Manage Jenkins-&gt;System Configuration-&gt;Configure System</code>这里的设置，主要是针对<code>Extended E-mail Notification</code>和<code>邮件通知</code>两部分的设置。具体设置如下：<br><img src="/blogs/images/src/Snipaste_2022-08-24_00-47-04.png" alt="wwwwwww"><br>上面主要是设置了用于发送系统消息的邮箱账号，邮箱的类型，授权码等信息。这里我使用的是QQ邮箱，QQ邮箱的授权码获取方式可以参考这里<a target="_blank" rel="noopener" href="https://blog.csdn.net/xiaochenXIHUA/article/details/123358350">开启邮箱的SMTP服务获取授权码(QQ邮箱、163邮箱)</a><br>为了让邮件看起来比较正式，相应的邮件格式可以配置一下，这里采用HTML的例子，直接配到<code>Default Content</code>里面。具体内容如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>$&#123;ENV, var=&quot;JOB_NAME&quot;&#125;-第$&#123;BUILD_NUMBER&#125;次构建日志<span class="tag">&lt;/<span class="name">title</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">leftmargin</span>=<span class="string">&quot;8&quot;</span> <span class="attr">marginwidth</span>=<span class="string">&quot;0&quot;</span> <span class="attr">topmargin</span>=<span class="string">&quot;8&quot;</span> <span class="attr">marginheight</span>=<span class="string">&quot;4&quot;</span>    </span></span><br><span class="line"><span class="tag">    <span class="attr">offset</span>=<span class="string">&quot;0&quot;</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">&quot;95%&quot;</span> <span class="attr">cellpadding</span>=<span class="string">&quot;0&quot;</span> <span class="attr">cellspacing</span>=<span class="string">&quot;0&quot;</span>  <span class="attr">style</span>=<span class="string">&quot;font-size: 11pt; font-family: Tahoma, Arial, Helvetica, sans-serif&quot;</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span>    </span><br><span class="line">            本邮件由系统自动发出，无需回复！<span class="tag">&lt;<span class="name">br</span>/&gt;</span>            </span><br><span class="line">            各位同事，大家好，以下为$&#123;PROJECT_NAME &#125;项目构建信息<span class="tag">&lt;/<span class="name">br</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">&quot;#CC0000&quot;</span>&gt;</span>构建结果 - $&#123;BUILD_STATUS&#125;<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>   </span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span>    </span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span>    </span><br><span class="line">            <span class="tag">&lt;<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">&quot;#0B610B&quot;</span>&gt;</span>构建信息<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span>    </span><br><span class="line">            <span class="tag">&lt;<span class="name">hr</span> <span class="attr">size</span>=<span class="string">&quot;2&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span>    </span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>    </span><br><span class="line">                <span class="tag">&lt;<span class="name">ul</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>项目名称 ： $&#123;PROJECT_NAME&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>构建编号 ： 第$&#123;BUILD_NUMBER&#125;次构建<span class="tag">&lt;/<span class="name">li</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>触发原因： $&#123;CAUSE&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>构建状态： $&#123;BUILD_STATUS&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>构建日志： <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;BUILD_URL&#125;console&quot;</span>&gt;</span>$&#123;BUILD_URL&#125;console<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>构建  Url ： <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;BUILD_URL&#125;&quot;</span>&gt;</span>$&#123;BUILD_URL&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>工作目录 ： <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;PROJECT_URL&#125;ws&quot;</span>&gt;</span>$&#123;PROJECT_URL&#125;ws<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>项目  Url ： <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;PROJECT_URL&#125;&quot;</span>&gt;</span>$&#123;PROJECT_URL&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>    </span><br><span class="line">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span>    </span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h4</span>&gt;</span><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">&quot;#0B610B&quot;</span>&gt;</span>失败用例<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span> <span class="attr">size</span>=<span class="string">&quot;2&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> /&gt;</span></span><br><span class="line">$FAILED_TESTS<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h4</span>&gt;</span><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">&quot;#0B610B&quot;</span>&gt;</span>最近提交(#$SVN_REVISION)<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span> <span class="attr">size</span>=<span class="string">&quot;2&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">$&#123;CHANGES_SINCE_LAST_SUCCESS, reverse=true, format=&quot;%c&quot;, changesFormat=&quot;<span class="tag">&lt;<span class="name">li</span>&gt;</span>%d [%a] %m<span class="tag">&lt;/<span class="name">li</span>&gt;</span>&quot;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">详细提交: <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;PROJECT_URL&#125;changes&quot;</span>&gt;</span>$&#123;PROJECT_URL&#125;changes<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在<code>hello world-&gt;配置</code>这里的设置，主要是针对<code>构建后操作</code>的设置。选择<code>Editable Email Notification</code>选项。配置可以保持默认，但是如果希望不同的项目发送邮件的对象、内容、发送触发条件不同的话，就需要在这里修改。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45878889/article/details/123925316">jenkins邮件配置和邮件发送</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/xiaochenXIHUA/article/details/123358350">开启邮箱的SMTP服务获取授权码(QQ邮箱、163邮箱)</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wuzhang/p/20190512wuzhang.html">Unity和Jenkins真是绝配，将打包彻底一键化！</a><br><a target="_blank" rel="noopener" href="http://dingxiaowei.cn/2018/11/17/">如何搭建Jenkins导出Unity安卓环境</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tyson-wu.github.io/blogs/2022/08/22/Git_Install/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blogs/images/avatar.png">
      <meta itemprop="name" content="Tyson Wu">
      <meta itemprop="description" content="If you want, Just do it!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TysonWu's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blogs/2022/08/22/Git_Install/" class="post-title-link" itemprop="url">4.1 Git Install</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-22 19:01:34" itemprop="dateCreated datePublished" datetime="2022-08-22T19:01:34+08:00">2022-08-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-12-09 19:49:14" itemprop="dateModified" datetime="2022-12-09T19:49:14+08:00">2022-12-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Git/" itemprop="url" rel="index"><span itemprop="name">Git</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Git/Tortoisegit/" itemprop="url" rel="index"><span itemprop="name">Tortoisegit</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Git安装其实没什么好讲的，但是单纯只装Git基本上只能使用命令行，当然Git也有客户端，但是功能有限。<br>所以通常我们会一同安装Tortoisegit软件，作为Git的图形交互界面。下面地址是一位大佬写的安装流程，涉及到如何配置等操作。<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/anayigeren/p/10177027.html">下载安装Git及Tortoisegit</a><br>因为Git提供HTTPS、SSH两种方式来提交拉取Git资源，而文中提到<code>通过使用 SSH URL 来提交代码便可以一劳永逸了</code>。所以这里打算采用SSH的方式，下面的方法就是SSH的方式。</p>
<blockquote>
<p>当然如果想使用HTTPS的方式，可以看这里:<br><a href="https://tyson-wu.github.io/blogs/2022/04/04/Git-Personal-access-tokens/">Git Personal Access Tokens</a></p>
</blockquote>
<p>但是使用上面SSH的方式，在从git服务拉取项目时，会报<code>No supported authentication methods available</code>的错误。这里有一篇文章讲述了如何解决这个问题：<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/Jeffxu_lib/article/details/112259246">TortoiseGit提示No supported authentication methods available错误</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tyson-wu.github.io/blogs/2022/08/18/Unity_Editor_Utils/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blogs/images/avatar.png">
      <meta itemprop="name" content="Tyson Wu">
      <meta itemprop="description" content="If you want, Just do it!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TysonWu's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blogs/2022/08/18/Unity_Editor_Utils/" class="post-title-link" itemprop="url">Unity Editor Utils</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-18 10:01:00" itemprop="dateCreated datePublished" datetime="2022-08-18T10:01:00+08:00">2022-08-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-12-09 19:49:14" itemprop="dateModified" datetime="2022-12-09T19:49:14+08:00">2022-12-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Unity/" itemprop="url" rel="index"><span itemprop="name">Unity</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Unity/Editor/" itemprop="url" rel="index"><span itemprop="name">Editor</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id=""><a href="#" class="headerlink" title=""></a></h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">MenuItem(<span class="meta-string">&quot;Assets/Helper/Get Texture Path For Houdini Terrain&quot;</span>,true,1)</span>]</span><br><span class="line"><span class="keyword">static</span> <span class="built_in">bool</span> _GetTexturePathForHoudiniTerrain()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(Selection.assetGUIDs.Length&gt;<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> path = AssetDatabase.GUIDToAssetPath(Selection.assetGUIDs[<span class="number">0</span>]);</span><br><span class="line">        <span class="built_in">string</span> temp = <span class="string">&quot;Resources/&quot;</span>;</span><br><span class="line">        <span class="built_in">int</span> index = path.IndexOf(temp);</span><br><span class="line">        <span class="keyword">if</span>(index&gt;<span class="number">-1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">[<span class="meta">MenuItem(<span class="meta-string">&quot;Assets/Helper/Get Texture Path For Houdini Terrain&quot;</span>,false,1)</span>]</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> _GetTexturePathForHoudiniTerrain()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">string</span> path = AssetDatabase.GUIDToAssetPath(Selection.assetGUIDs[<span class="number">0</span>]);</span><br><span class="line">    <span class="built_in">string</span> temp = <span class="string">&quot;Resources/&quot;</span>;</span><br><span class="line">    <span class="built_in">int</span> index = path.IndexOf(temp);</span><br><span class="line">    <span class="built_in">int</span> end = path.lastIndexOf(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">    index += temo.Length;</span><br><span class="line">    GUIUtility.systemCopyBuffer = path.Substring(index,end-index);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[<span class="meta">MenuItem(<span class="meta-string">&quot;Assets/Helper/Trim File Name&quot;</span>)</span>]</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">TrimFileName</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(Selection.assetGUIDs.Length &gt;<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">int</span> i=<span class="number">0</span>;i&lt;Selection.assetGUIDs.Length;++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">string</span> path = AssetDatabase.GUIDToAssetPath(Selection.assetGUIDs[i]);</span><br><span class="line">            <span class="built_in">string</span> fileName = Path.GetFileName(path);</span><br><span class="line">            <span class="built_in">int</span> index = path.IndexOf(<span class="string">&#x27; &#x27;</span>);</span><br><span class="line">            <span class="keyword">if</span>(index&gt;<span class="number">-1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">string</span> newFileName = fileName.Replace(<span class="string">&#x27; &#x27;</span>,<span class="string">&#x27;_&#x27;</span>);</span><br><span class="line">                <span class="built_in">string</span> rst = AssetDatabase.RenameAsset(path,newFileName);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        AssetDatabase.SaveAssets();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tyson-wu.github.io/blogs/2022/08/10/Houdini-Debug-List/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blogs/images/avatar.png">
      <meta itemprop="name" content="Tyson Wu">
      <meta itemprop="description" content="If you want, Just do it!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TysonWu's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blogs/2022/08/10/Houdini-Debug-List/" class="post-title-link" itemprop="url">Houdini Debug List</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-10 10:01:00" itemprop="dateCreated datePublished" datetime="2022-08-10T10:01:00+08:00">2022-08-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-12-09 19:49:14" itemprop="dateModified" datetime="2022-12-09T19:49:14+08:00">2022-12-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Unity/" itemprop="url" rel="index"><span itemprop="name">Unity</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Unity/Houdini/" itemprop="url" rel="index"><span itemprop="name">Houdini</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="HEU-BaseSync-cs"><a href="#HEU-BaseSync-cs" class="headerlink" title="HEU_BaseSync.cs"></a>HEU_BaseSync.cs</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">terrainData.size &#x3D; new Vector3(terrainBuffers[t]._terrainSizeX, heightRange, terainBuffers[t]._terrainSizeY);</span><br><span class="line">terrain.Flush();</span><br><span class="line">UnityEditor.AssetDatabase.SaveAssets();  &#x2F;&#x2F; add this line</span><br></pre></td></tr></table></figure>

<h2 id="HEU-HAPIUtility-cs-H19-0-434"><a href="#HEU-HAPIUtility-cs-H19-0-434" class="headerlink" title="HEU_HAPIUtility.cs(H19.0.434)"></a>HEU_HAPIUtility.cs(H19.0.434)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Do not process the main display geo twice!</span><br><span class="line">if (editGeoInfo.isDisplayGeo) continue;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; We only handle editable curves for now</span><br><span class="line">&#x2F;&#x2F;if (editGeoInfo.type !&#x3D; HAPI_GeoType.HAPI_GEOTYPE_CURVE) continue; </span><br><span class="line">if (editGeoInfo.type !&#x3D; HAPI_GeoType.HAPI_GEOTYPE_CURVE &amp;&amp; editGeoInfo.type !&#x3D; HAPI_GeoType.HAPI_GEOTYPE_INTERMEDIATE) continue;   &#x2F;&#x2F; modify this</span><br><span class="line">&#x2F;&#x2F;session.CookNode(editNodeID, HEU_PluginSettings.CookTemplatedGeos);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Add this geo to the geo info array</span><br><span class="line">editableGeoInfos.Add(editGeoInfo);</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tyson-wu.github.io/blogs/2022/04/04/Git-Personal-access-tokens/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blogs/images/avatar.png">
      <meta itemprop="name" content="Tyson Wu">
      <meta itemprop="description" content="If you want, Just do it!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TysonWu's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blogs/2022/04/04/Git-Personal-access-tokens/" class="post-title-link" itemprop="url">Git Personal Access Tokens</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-04-04 15:01:00" itemprop="dateCreated datePublished" datetime="2022-04-04T15:01:00+08:00">2022-04-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-12-09 19:49:14" itemprop="dateModified" datetime="2022-12-09T19:49:14+08:00">2022-12-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Git/" itemprop="url" rel="index"><span itemprop="name">Git</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近使用GitHub提交项目时，发现原先的账号密码的方式已经失效，GitHub官方表示不再支持使用账号密码的方式，而是改为使用<code>Personal Access Tokens</code>访问令牌的方式。<br><img src="https://jhooq.com/wp-content/uploads/ssl/git-personal-access-token/git-personal-access-token-error.webp"></p>
<p><code>Personal Access Tokens</code>是通过在GitHub上创建令牌，并且设置令牌的使用时限，来限制访问者的访问权限。也可以直接删除令牌来清除访问者的访问权限。而令牌的作用域时针对整个GitHub账号下的所有项目。所以创建方式也是在GitHub下的总Setting下设置。创造令牌的步骤如下：<br>1：登录GitHub账号；<br>2：选择右上角的头像图标 <code>-&gt; Profile Pic -&gt; Setting</code>；<br><img src="https://jhooq.com/wp-content/uploads/ssl/git-personal-access-token/git-personal-access-token-settings.webp"><br>3：然后在Setting页面左侧菜单栏里面选择<code>Developer Settings</code>；<br><img src="https://jhooq.com/wp-content/uploads/ssl/git-personal-access-token/git-personal-access-token-developer-settings.webp"><br>4：然后在<code>Developer Settings</code>页面上选择<code>Personal Access Token </code>选项；<br><img src="https://jhooq.com/wp-content/uploads/ssl/git-personal-access-token/git-personal-access-token-generate.webp"><br>5：然后选择<code>Generate New Token</code>按钮开始创建令牌;<br><img src="https://jhooq.com/wp-content/uploads/ssl/git-personal-access-token/git-personal-access-token-generate-new-token.webp"><br>6：给令牌选择一个名字，令牌的使用时限，以及令牌的访问权限范围；<br><img src="https://jhooq.com/wp-content/uploads/ssl/git-personal-access-token/git-personal-access-token-new-scopes.webp"><br>7：然后点击<code>Generate Token</code>生成令牌；<br>8：生成的令牌是一串字符串，只有在令牌生成的时候才能看到令牌明码，我们需要复制这个字符串，后续再打开这个令牌界面的时候，就看不到令牌字符串了；<br><img src="https://jhooq.com/wp-content/uploads/ssl/git-personal-access-token/git-personal-access-token-copy-token.webp"><br>拿到令牌字符串后，我们就可以使用这个令牌来clone或者push该GitHub账号下的项目了。使用令牌时，我们需要使用令牌字符串来拼接git资源路径。<br>下面以<a target="_blank" rel="noopener" href="https://github.com/Tyson-Wu/Unity_Jenkins">https://github.com/Tyson-Wu/Unity_Jenkins</a>这个项目为例。通常我们clone时直接使用一下命令:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/Tyson-Wu/Unity_Jenkins.git</span><br></pre></td></tr></table></figure>
<p>但是这个命令只能拷贝资源，拷贝后并不能上传修改后的资源。想要拥有上传权限，那就要用令牌来修改访问权限了。而拼接的规则如下：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://&lt;username&gt;:&lt;personal_access_token&gt;@github.com/&lt;username&gt;/&lt;project_name&gt;.git</span><br></pre></td></tr></table></figure>
<p>假设此时我创建的令牌字符串为<code>ghp_7qb6ZektsWIFkHzJiaL4gH2GKzNUqD3P8ZoA</code>,对于上面子资源，拼接后的路径应该是：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://ghp_7qb6ZektsWIFkHzJiaL4gH2GKzNUqD3P8ZoA@github.com/Tyson-Wu/Unity_Jenkins.git</span><br></pre></td></tr></table></figure>
<p>当拷贝完后，我们进入到Unity_Jenkins的本地拷贝根目录下，打开git命令行，然后修改它的orgion。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote set-url origin https://ghp_7qb6ZektsWIFkHzJiaL4gH2GKzNUqD3P8ZoA@github.com/Tyson-Wu/Unity_Jenkins.git</span><br></pre></td></tr></table></figure>
<p>这时候就设置好了访问权限，假设我们本地文件修改后想提交，直接使用<code>Push</code>命令就行了。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tyson-wu.github.io/blogs/2022/03/21/Unity-Editor-Project-Linker/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blogs/images/avatar.png">
      <meta itemprop="name" content="Tyson Wu">
      <meta itemprop="description" content="If you want, Just do it!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TysonWu's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blogs/2022/03/21/Unity-Editor-Project-Linker/" class="post-title-link" itemprop="url">Project Linker</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-03-21 20:01:00" itemprop="dateCreated datePublished" datetime="2022-03-21T20:01:00+08:00">2022-03-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-12-09 19:49:14" itemprop="dateModified" datetime="2022-12-09T19:49:14+08:00">2022-12-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Unity/" itemprop="url" rel="index"><span itemprop="name">Unity</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blogs/categories/Unity/Editor/" itemprop="url" rel="index"><span itemprop="name">Editor</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><p>在Unit内创建多个项目实例。</p>
<h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">ProjectLinker</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">class</span> <span class="title">CmdHelper</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">LinkFolder</span>(<span class="params"><span class="built_in">string</span> orgPath, <span class="built_in">string</span> linkPath</span>)</span></span><br><span class="line"><span class="function"></span>		&#123;</span><br><span class="line">			ProcessStartInfo start = <span class="keyword">new</span> ProcessStartInfo(<span class="string">&quot;cmd.exe&quot;</span>);</span><br><span class="line">			start.CreateNoWindow = <span class="literal">true</span>;</span><br><span class="line">			start.UseShellExecute = <span class="literal">false</span>;</span><br><span class="line">			start.RedirectStandardInput = <span class="literal">true</span>;</span><br><span class="line">			<span class="keyword">var</span> process = Process.Start(start);</span><br><span class="line">			<span class="keyword">var</span> sw = process.StandardInput;</span><br><span class="line">			sw.WriteLine(@<span class="string">$&quot;mklink /D &quot;</span><span class="string">&quot;&#123;linkPath&#125;&quot;</span><span class="string">&quot; &quot;</span><span class="string">&quot;&#123;orgPath&#125;&quot;</span><span class="string">&quot;&quot;</span>);</span><br><span class="line">			sw.Close();</span><br><span class="line">			process.WaitForExit();</span><br><span class="line">			process.Close();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">LaunchUnityProject</span>(<span class="params"><span class="built_in">string</span> projectFullPath, <span class="built_in">string</span> buildTarget</span>)</span></span><br><span class="line"><span class="function"></span>		&#123;</span><br><span class="line">			<span class="built_in">string</span> editorPath = EditorApplication.applicationPath;</span><br><span class="line">			System.Treading.ThreadPool.QueueUserWorkItem(<span class="built_in">delegate</span> (<span class="built_in">object</span> state)</span><br><span class="line">			&#123;</span><br><span class="line">				Process p = <span class="literal">null</span>;</span><br><span class="line">				<span class="keyword">try</span></span><br><span class="line">				&#123;</span><br><span class="line">					<span class="built_in">string</span> arg = <span class="string">$&quot;-projectPath \&quot;<span class="subst">&#123;projectFullPath&#125;</span>\&quot;&quot;</span>;</span><br><span class="line">					<span class="keyword">if</span>(!<span class="built_in">string</span>.IsNullOrEmpty(buildTarget))</span><br><span class="line">					&#123;</span><br><span class="line">						arg += <span class="string">$&quot; -buildTarget <span class="subst">&#123;buildTarget&#125;</span>&quot;</span>;</span><br><span class="line">					&#125;</span><br><span class="line">					ProcessStartInfo start = <span class="keyword">new</span> ProcessStartInfo(editorPath, arg);</span><br><span class="line">					start.CreateNoWindow = <span class="literal">false</span>;</span><br><span class="line">					start.UseShellExecute = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">					p = Process.Start(start);</span><br><span class="line">				&#125;</span><br><span class="line">				catch(System.Exception e)</span><br><span class="line">				&#123;</span><br><span class="line">					UnityEngine.Debug.LogException(e);</span><br><span class="line">					<span class="keyword">if</span>(p != <span class="literal">null</span>)</span><br><span class="line">					&#123;</span><br><span class="line">						p.Close();</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">namespace</span> <span class="title">ProjectLinker</span></span><br><span class="line">&#123;</span><br><span class="line">	[<span class="meta">Serializable</span>]</span><br><span class="line">	<span class="keyword">class</span> <span class="title">CacheDataTable</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="title">List</span>&lt;<span class="title">CacheDataElem</span>&gt; elems</span> = <span class="keyword">new</span> List&lt;CacheDataElem&gt;();</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="title">CacheDataTable</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>		&#123;</span><br><span class="line">			List&lt;CacheDataElem&gt; elems = <span class="keyword">new</span> List&lt;CacheDataElem&gt;();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	[<span class="meta">Serializable</span>]</span><br><span class="line">	<span class="keyword">class</span> <span class="title">CacheDataElem</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">public</span> <span class="built_in">string</span> name;</span><br><span class="line">		<span class="keyword">public</span> <span class="built_in">string</span> buildTarget;</span><br><span class="line">		<span class="keyword">public</span> <span class="built_in">string</span> projectPath;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEditor;</span><br><span class="line"><span class="keyword">using</span> UnityEditor.IMGUI.Controls;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">namespace</span> <span class="title">ProjectLinker</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">class</span> <span class="title">ProjectTreeView</span> : <span class="title">TreeView</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">private</span> CacheDataTable _tableData;</span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">event</span> Action&lt;<span class="built_in">int</span>&gt; OnSelected;</span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">event</span> Action OnDataChange;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="title">ProjectTreeView</span>(<span class="params">CacheDataTable table, TreeViewState state</span>) : <span class="title">base</span>(<span class="params">state</span>)</span></span><br><span class="line"><span class="function"></span>		&#123;</span><br><span class="line">			_tableData = table;</span><br><span class="line">			showAlternatingRowBackgrounds = <span class="literal">false</span>;</span><br><span class="line">			ReLoad();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> TreeViewItem <span class="title">BuildRoot</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>		&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> TreeViewItem &#123;id = <span class="number">0</span>, depth = <span class="number">-1</span>&#125;;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> IList&lt;TreeViewItem&gt; <span class="title">BuildRows</span>(<span class="params">TreeviewItem root</span>)</span></span><br><span class="line"><span class="function"></span>		&#123;</span><br><span class="line">			<span class="keyword">var</span> rows = GetRows() ?? <span class="keyword">new</span> List&lt;TreeViewItem&gt;(<span class="number">10</span>);</span><br><span class="line">			rows.Clear();</span><br><span class="line">			<span class="keyword">var</span> iconTex = EditorGUIUtility.FindTexture(<span class="string">&quot;Folder Icon&quot;</span>);</span><br><span class="line">			<span class="keyword">for</span>(<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; _tableData.elems.Count; ++i)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">var</span> item = <span class="keyword">new</span> TreeViewItem &#123;id = i + <span class="number">1</span>, depth = <span class="number">0</span>, displyName = _tableData.elems[i].name&#125;;</span><br><span class="line">				item.icon = iconTex;</span><br><span class="line">				root.AddChild(item);</span><br><span class="line">				rows.Add(item);</span><br><span class="line">			&#125;</span><br><span class="line">			SetupDepthsFromParentsAndChildren(root);</span><br><span class="line">			<span class="keyword">return</span> rows;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">RowGUI</span>(<span class="params">RowGUIArgs args</span>)</span></span><br><span class="line"><span class="function"></span>		&#123;</span><br><span class="line">			<span class="keyword">base</span>.RowGUI(args);</span><br><span class="line">			<span class="built_in">float</span> width = <span class="number">16f</span>;</span><br><span class="line">			rect deleRect = <span class="keyword">new</span> Rect(args.rowRect.width - width - <span class="number">10</span>, args.rowRect.y, width, width);</span><br><span class="line">			Event evt = Event.current;</span><br><span class="line">			<span class="keyword">if</span>(evt.type == EventType.MouseDown &amp;&amp; deleRect.Contains(evt.mousePosition))</span><br><span class="line">				SelectionClick(args.item, <span class="literal">false</span>);</span><br><span class="line">			<span class="keyword">if</span>(GUI.Button(deleRect, <span class="string">&quot;x&quot;</span>))</span><br><span class="line">			&#123;</span><br><span class="line">				_tableData.elems.RemoveAt(args.item.id - <span class="number">1</span>);</span><br><span class="line">				Reload();</span><br><span class="line">				OnDataChange?.Invoke();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">SingleClickedItem</span>(<span class="params"><span class="built_in">int</span> id</span>)</span></span><br><span class="line"><span class="function"></span>		&#123;</span><br><span class="line">			<span class="keyword">base</span>.SingleClickedItem(id);</span><br><span class="line">			<span class="built_in">int</span> index = id - <span class="number">1</span>;</span><br><span class="line">			OnSelected?.Invoke(index);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> UnityEditor;</span><br><span class="line"><span class="keyword">using</span> System.IO;</span><br><span class="line"><span class="keyword">using</span> UnityEditor.IMGUI.Controls;</span><br><span class="line"><span class="keyword">namespace</span> <span class="title">ProjectLinker</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ProjectLinker</span> : <span class="title">EditorWindow</span></span><br><span class="line">	&#123;</span><br><span class="line">		[<span class="meta">MenuItem(<span class="meta-string">&quot;Window/Project Linker&quot;</span>)</span>]</span><br><span class="line">		<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Open</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>		&#123;</span><br><span class="line">			<span class="keyword">var</span> win = EditorWindow.GetWindow&lt;ProjectLinker&gt;(<span class="string">&quot;关联项目快捷启动&quot;</span>);</span><br><span class="line">			win.Show();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">private</span> <span class="keyword">const</span> <span class="built_in">string</span> _CACHE_TABLE_HEADER = <span class="string">&quot;ProjectLinker_Table_&quot;</span>;</span><br><span class="line">		<span class="keyword">private</span> <span class="built_in">string</span> _copyProjectName = <span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">private</span> <span class="built_in">string</span> _defaultCopyProjectName = <span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">private</span> <span class="built_in">string</span> _curProjectPath = <span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">private</span> <span class="built_in">string</span> _rootPath = <span class="string">&quot;&quot;</span>;</span><br><span class="line">		[<span class="meta">SerializeField</span>] TreeViewState _treeViewState;</span><br><span class="line">		ProjectTreeView _treeView;</span><br><span class="line"></span><br><span class="line">		CacheDataTable _cacheDataTable = <span class="literal">null</span>;</span><br><span class="line">		<span class="built_in">int</span> _selectedElemIndex = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">		CacheDataElem selectedElem</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">get</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span>(_selectedElemIndex &gt; <span class="number">-1</span> &amp;&amp; _selectedElemIndex &lt; _cacheDataTable.elems.Count)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">return</span> _cacheDataTable.elems[_selectedElemIndex];</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnEnable</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>		&#123;</span><br><span class="line">			_curProjectPath = Path.GetDirectoryName(Application.dataPath);</span><br><span class="line">			_rootPath = Path.GetDirectoryName(_curProjectPath);</span><br><span class="line">			_defaultCopyProjectName = Path.GetFileName(_curProjectPath) + <span class="string">&quot;_copy&quot;</span>;</span><br><span class="line">			_copyProjectName = _defaultCopyProjectName;</span><br><span class="line">			LoadCache();</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span>(_treeViewState == <span class="literal">null</span>)</span><br><span class="line">				_treeViewState = <span class="keyword">new</span> TreeViewState();</span><br><span class="line">			_treeView = <span class="keyword">new</span> ProjectTreeView(_cacheDataTable, _treeViewState);</span><br><span class="line">			_treeView.OnSelected -= OnSelected;</span><br><span class="line">			_treeView.OnSelected += OnSelected;</span><br><span class="line">			_treeView.OnDataChange -= SaveCache;</span><br><span class="line">			_treeView.OnDataChange += SaveCache;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnSelected</span>(<span class="params"><span class="built_in">int</span> index</span>)</span></span><br><span class="line"><span class="function"></span>		&#123;</span><br><span class="line">			_selectedElemIndex = index;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawTree</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>		&#123;</span><br><span class="line">			Rect rect = GUILayoutUtility.GetRect(<span class="number">1000</span>, <span class="number">10000</span>, <span class="number">0</span>, <span class="number">10000</span>);</span><br><span class="line">			_treeView.OnGUI(rect);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawElemInfo</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>		&#123;</span><br><span class="line">			EditorGUILayout.BeginVertical(EditorStyles.helpBox);</span><br><span class="line">			EditorGUILayout.BeginHorizontal();</span><br><span class="line">			GUILayout.Label(<span class="string">&quot;选中项目详情&quot;</span>, EditorStyles.label);</span><br><span class="line">			EditorGUI.BeginDisabledGroup(<span class="literal">true</span>);</span><br><span class="line">			EditorGUILayout.TextField(selectedElem.buildTarget, GUILayout.Width(<span class="number">100</span>));</span><br><span class="line">			EditorGUI.EndDisabledGroup();</span><br><span class="line">			EditorGUILayout.EndHorizontal();</span><br><span class="line"></span><br><span class="line">			EditorGUILayout.BeginHorizontal(GUILayout.ExpandWidth(<span class="literal">true</span>));</span><br><span class="line">			EditorGUILayout.BeginVertical();</span><br><span class="line">			EditorGUI.BeginChangeCheck();</span><br><span class="line">			selectedElem.name = EditorGUILayout.TextField(<span class="string">&quot;项目名称&quot;</span>, selectedElem.name);</span><br><span class="line">			EditorGUI.BeginDisabledGroup(<span class="literal">true</span>);</span><br><span class="line">			EditorGUILayout.TextField(<span class="string">&quot;项目路径&quot;</span>, selectedElem.projectPath);</span><br><span class="line">			EditorGUI.EndDisabledGroup();</span><br><span class="line">			<span class="keyword">if</span>(EditorGUI.EndChangeCheck())</span><br><span class="line">			&#123;</span><br><span class="line">				SaveCache();</span><br><span class="line">				_treeView.Reload();</span><br><span class="line">			&#125;</span><br><span class="line">			EditorGUILayout.EndVertical();</span><br><span class="line"></span><br><span class="line">			EditorGUILayout.BeginVertical(GUILayout.Width(<span class="number">50</span>));</span><br><span class="line">			<span class="keyword">if</span>(GUILayout.Button(<span class="string">&quot;删除&quot;</span>))</span><br><span class="line">			&#123;</span><br><span class="line">				_cacheDataTable.elems.RemoveAt(_selectedElemIndex);</span><br><span class="line">				SaveCache();</span><br><span class="line">				_treeView.Reload();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(GUILayout.Button(<span class="string">&quot;重置&quot;</span>))</span><br><span class="line">			&#123;</span><br><span class="line">				selectedElem.name = Path.GetFileName(selectedElem.projectPath);</span><br><span class="line">				SaveCache();</span><br><span class="line">				_treeView.Reload();</span><br><span class="line">			&#125;</span><br><span class="line">			EditorGUILayout.EndVertical();</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">if</span>(GUILayout.Button(<span class="string">&quot;打开&quot;</span>, GUIlayout.Width(<span class="number">50</span>), GUILayout.ExpandHeight(<span class="literal">true</span>)))</span><br><span class="line">			&#123;</span><br><span class="line">				CmdHelper.LaunchUnityProject(selectedElem.projectPath, selectedElem.buildTarget);</span><br><span class="line">				Close();</span><br><span class="line">			&#125;</span><br><span class="line">			EditorGUILayout.EndHorizontal();</span><br><span class="line">			EidtorGUILayout.EndVertical();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnGUI</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>		&#123;</span><br><span class="line">			DrawTree();</span><br><span class="line">			<span class="keyword">if</span>(selectedElem != <span class="literal">null</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				DrawElemInfo();</span><br><span class="line">			&#125;</span><br><span class="line">			GUILayout.FlexibleSpace();</span><br><span class="line">			DrawButton();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawButton</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>		&#123;</span><br><span class="line">			EditorGUILayout.BeginHorizontal();</span><br><span class="line">			<span class="keyword">if</span>(GUILayout.Button(<span class="string">&quot;关联已有项目&quot;</span>, GUILayout.Width(<span class="number">100</span>), GUIlayout.ExpandHeight(<span class="literal">true</span>)))</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">var</span> folder = EditorUtility.OpenFolderPannel(<span class="string">&quot;&quot;</span>, _rootPath, <span class="string">&quot;&quot;</span>);</span><br><span class="line">				<span class="keyword">if</span>(!<span class="built_in">string</span>.IsNullOrEmpty(folder))</span><br><span class="line">				&#123;</span><br><span class="line">					folder = folder.Replace(<span class="string">&#x27;/&#x27;</span>, <span class="string">&#x27;\\&#x27;</span>);</span><br><span class="line">					<span class="keyword">if</span>(folder == _curProjectPath)</span><br><span class="line">					&#123;</span><br><span class="line">						Debug.LogError(<span class="string">&quot;不能关联当前项目本身&quot;</span>);</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">else</span></span><br><span class="line">					&#123;</span><br><span class="line">						DirectoryInfo folderInfo = <span class="keyword">new</span> DirectoryInfo(folder);</span><br><span class="line">						<span class="keyword">var</span> childDirec = folderInfo.GetDirectories(<span class="string">&quot;Assets&quot;</span>, SearchOption.TopDirectoryOnly);</span><br><span class="line">						<span class="built_in">bool</span> valide = childDirec.Lenght == <span class="number">1</span>;</span><br><span class="line">						<span class="keyword">if</span>(valid)</span><br><span class="line">						&#123;</span><br><span class="line">							<span class="built_in">bool</span> hasExisted = <span class="literal">false</span>;</span><br><span class="line">							<span class="keyword">for</span>(<span class="built_in">int</span> i = <span class="number">0</span>;i &lt; _cacheDataTable.elems.Count; ++i)</span><br><span class="line">							&#123;</span><br><span class="line">								<span class="keyword">if</span>(_cacheDataTable.elems[i].projectPath == folderInfo.FullName)</span><br><span class="line">								&#123;</span><br><span class="line">									hasExisted = <span class="literal">true</span>;</span><br><span class="line">									_selectedElemIndex = i + <span class="number">1</span>;</span><br><span class="line">									_treeView.SetSelection(<span class="keyword">new</span> List&lt;<span class="built_in">int</span>&gt;&#123;_selectedElemIndex&#125;);</span><br><span class="line">									<span class="keyword">break</span>;</span><br><span class="line">								&#125;</span><br><span class="line">							&#125;</span><br><span class="line">							<span class="keyword">if</span>(!hasExisted)</span><br><span class="line">							&#123;</span><br><span class="line">								AddItem(folderInfo);</span><br><span class="line">							&#125;</span><br><span class="line">						&#125;</span><br><span class="line">						<span class="keyword">else</span></span><br><span class="line">						&#123;</span><br><span class="line">							Debug.LogError(<span class="string">&quot;关联的目录不是Unity项目&quot;</span>);</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			EditorGUILayout.BeginVertical(EditorStyles.helpBox);</span><br><span class="line">			GUILayout.Label(<span class="string">&quot;当前项目复制版&quot;</span>);</span><br><span class="line">			_copyProjectName = EditorGUIlayout.TextField(<span class="string">&quot;项目名称:&quot;</span>, _copyProjectName);</span><br><span class="line">			EditorGUI.BeginDisabledGroup(<span class="built_in">string</span>.IsNullOrEmpty(_copyProjectName));</span><br><span class="line">			<span class="keyword">if</span>(GUILayout.Button(<span class="string">&quot;创建&quot;</span>))</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">var</span> folder = EditorUtility.OpenFolderPanel(<span class="string">&quot;&quot;</span>, _rootPath, <span class="string">&quot;&quot;</span>);</span><br><span class="line">				<span class="keyword">if</span>(!<span class="built_in">string</span>.IsNullOrEmpty(folder))</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="built_in">string</span> path = Path.Combine(folder, _copyProjectName);</span><br><span class="line">					<span class="keyword">if</span>(Directory.Exists(path))</span><br><span class="line">					&#123;</span><br><span class="line">						Debug.LogError(<span class="string">&quot;工程名已经存在&quot;</span>);</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">else</span></span><br><span class="line">					&#123;</span><br><span class="line">						DirectoryInfo folderInfo = <span class="keyword">new</span> DirectoryInfo(path);</span><br><span class="line">						<span class="keyword">try</span></span><br><span class="line">						&#123;</span><br><span class="line">							folderInfo.Create();</span><br><span class="line">							LinkProject(folderInfo);</span><br><span class="line">							AddItem(folderInfo, <span class="literal">true</span>);</span><br><span class="line">						&#125;</span><br><span class="line">						catch</span><br><span class="line">						&#123;</span><br><span class="line">							Debug.LogError(<span class="string">&quot;Error&quot;</span>);</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			EditorGUI.EndDisabledGroup();</span><br><span class="line">			EditorGUILayout.EndHorizontal();</span><br><span class="line">			EditorGUILayout.EndHorizontal();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">LinkProject</span>(<span class="params">DirectoryInfo folderInfo</span>)</span></span><br><span class="line"><span class="function"></span>		&#123;</span><br><span class="line">			<span class="built_in">string</span> orgPath = Path.Combine(_curProjectPath, <span class="string">&quot;Assets&quot;</span>);</span><br><span class="line">			<span class="built_in">string</span> copyPath = Path.Combine(folderInfo.FullName, <span class="string">&quot;Assets&quot;</span>);</span><br><span class="line">			CmdHelper.LinkFolder(orgPath, copyPath);</span><br><span class="line">			<span class="built_in">string</span> orgPath = Path.Combine(_curProjectPath, <span class="string">&quot;ProjectSettings&quot;</span>);</span><br><span class="line">			<span class="built_in">string</span> copyPath = Path.Combine(folderInfo.FullName, <span class="string">&quot;ProjectSettings&quot;</span>);</span><br><span class="line">			CmdHelper.LinkFolder(orgPath, copyPath);</span><br><span class="line">			<span class="built_in">string</span> orgPath = Path.Combine(_curProjectPath, <span class="string">&quot;Packages&quot;</span>);</span><br><span class="line">			<span class="built_in">string</span> copyPath = Path.Combine(folderInfo.FullName, <span class="string">&quot;Packages&quot;</span>);</span><br><span class="line">			CmdHelper.LinkFolder(orgPath, copyPath);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">AddItem</span>(<span class="params">DirectoryInfo folderInfo, <span class="built_in">bool</span> copyTarget = <span class="literal">false</span></span>)</span></span><br><span class="line"><span class="function"></span>		&#123;</span><br><span class="line">			CacheDataElem elem = <span class="keyword">new</span> CacheDataElem</span><br><span class="line">			&#123;</span><br><span class="line">				name = folderInfo.name,</span><br><span class="line">				projectPath = folderInfo.FullName</span><br><span class="line">			&#125;;</span><br><span class="line">			<span class="keyword">if</span>(copyTarget)</span><br><span class="line">			&#123;</span><br><span class="line">				elem.buildTarget = BuildPipeline.GetBuildTargetName(EditorUserBuildSettings.activeBuildTarget);</span><br><span class="line">			&#125;</span><br><span class="line">			_cacheDataTable.elems.Add(elems);</span><br><span class="line">			SaveCache();</span><br><span class="line">			_treeView.Reload();</span><br><span class="line">			_treeView.SetSelection(<span class="keyword">new</span> List&lt;<span class="built_in">int</span>&gt;&#123;_cacheDataTable.elems.Count&#125;);</span><br><span class="line">			_selectedElemIndex = _cacheDataTable.elems.Count - <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">LoadCache</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>		&#123;</span><br><span class="line">			<span class="keyword">var</span> tableStr = EditorPrefs.GetString(_CACHE_TABLE_HEADER + Application.dataPath, <span class="literal">null</span>);</span><br><span class="line">			<span class="keyword">if</span>(<span class="built_in">string</span>.IsNullOrEmpty(tableStr))</span><br><span class="line">			&#123;</span><br><span class="line">				_cacheDataTable = <span class="keyword">new</span> CacheDataTable();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				_cacheDataTable = JsonUtility.FromJson&lt;CacheDataTable&gt;(tableStr);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">SaveCache</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>		&#123;</span><br><span class="line">			<span class="keyword">var</span> tableStr = JsonUtility.ToJson(_cacheDataTable);</span><br><span class="line">			EditorPrefs.SetString(_CACHE_TABLE_HEADER + Application.dataPath, tableStr);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/blogs/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/blogs/">1</a><span class="page-number current">2</span><a class="page-number" href="/blogs/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/blogs/page/7/">7</a><a class="extend next" rel="next" href="/blogs/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Tyson Wu"
      src="/blogs/images/avatar.png">
  <p class="site-author-name" itemprop="name">Tyson Wu</p>
  <div class="site-description" itemprop="description">If you want, Just do it!</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blogs/archives/">
        
          <span class="site-state-item-count">63</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/blogs/categories/">
          
        <span class="site-state-item-count">23</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/blogs/tags/">
          
        <span class="site-state-item-count">32</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Tyson-Wu" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Tyson-Wu" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/zhao-wu-zhu-43" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;zhao-wu-zhu-43" rel="noopener" target="_blank"><i class="知乎 fa-fw"></i>知乎</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.cnblogs.com/Hi-blog/" title="https:&#x2F;&#x2F;www.cnblogs.com&#x2F;Hi-blog&#x2F;" rel="noopener" target="_blank">starnight_cyber</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Tyson Wu</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/blogs/lib/anime.min.js"></script>
  <script src="/blogs/lib/velocity/velocity.min.js"></script>
  <script src="/blogs/lib/velocity/velocity.ui.min.js"></script>

<script src="/blogs/js/utils.js"></script>

<script src="/blogs/js/motion.js"></script>


<script src="/blogs/js/schemes/pisces.js"></script>


<script src="/blogs/js/next-boot.js"></script>




  















  

  

</body>
</html>
